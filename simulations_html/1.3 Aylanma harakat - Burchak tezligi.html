<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aylanma Harakat - Burchak Tezligi Simulyatori</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .main-content {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 20px;
        }
        .simulation-area, .controls-panel {
            background: linear-gradient(145deg, #fff, #f8f9fa);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
            border: 2px solid #e3f2fd;
        }
        .canvas-container {
            border: 3px solid #667eea;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        #canvas {
            display: block;
            background: radial-gradient(circle, #e3f2fd 0%, #bbdefb 100%);
        }
        .charts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .chart {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e3f2fd;
        }
        .chart-title {
            text-align: center;
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 10px;
        }
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 0.9em;
        }
        .btn-play { background: linear-gradient(135deg, #28a745, #20c997); color: white; }
        .btn-pause { background: linear-gradient(135deg, #6c757d, #868e96); color: white; }
        .btn-reset { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn:hover { transform: translateY(-2px); opacity: 0.9; }
        .status {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #e3f2fd;
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            margin-bottom: 8px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
        }
        .status-value { font-weight: bold; color: #667eea; }
        .control-group {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #e3f2fd;
        }
        .control-group h3 {
            color: #1976d2;
            margin-bottom: 15px;
        }
        .control-item {
            margin-bottom: 15px;
        }
        .control-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #666;
        }
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            cursor: pointer;
        }
        .value-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }
        .formula {
            background: linear-gradient(145deg, #fff8e1, #fffde7);
            border: 2px solid #ffeb3b;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .formula-title { font-weight: bold; color: #f57f17; margin-bottom: 10px; }
        .presets {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .btn-preset {
            background: #17a2b8;
            color: white;
            padding: 8px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-preset:hover { background: #138496; transform: translateY(-1px); }
        .rotation-counter {
            text-align: center;
            background: linear-gradient(145deg, #e8f5e8, #f1f8e9);
            border: 2px solid #4caf50;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .rotation-count {
            font-size: 1.5em;
            font-weight: bold;
            color: #4caf50;
        }
        @media (max-width: 768px) {
            .main-content { grid-template-columns: 1fr; }
            .charts { grid-template-columns: 1fr; }
            .header h1 { font-size: 2em; }
            .controls-panel { order: -1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Aylanma Harakat - Burchak Tezligi Simulyatori</h1>
            <p>œâ = Œ∏/t va Œ∏ = œât tenglamalari bilan aylanma harakat tahlili</p>
        </div>

        <div class="main-content">
            <div class="simulation-area">
                <div class="canvas-container">
                    <canvas id="canvas" width="600" height="400"></canvas>
                </div>

                <div class="controls">
                    <button class="btn btn-play" id="playBtn">‚ñ∂ Boshlash</button>
                    <button class="btn btn-pause" id="pauseBtn">‚è∏ To'xtatish</button>
                    <button class="btn btn-reset" id="resetBtn">üîÑ Qayta</button>
                </div>

                <div class="charts">
                    <div class="chart">
                        <div class="chart-title">Burchak-Vaqt (Œ∏-t)</div>
                        <canvas id="angleChart" width="280" height="200"></canvas>
                    </div>
                    <div class="chart">
                        <div class="chart-title">Burchak Tezligi-Vaqt (œâ-t)</div>
                        <canvas id="omegaChart" width="280" height="200"></canvas>
                    </div>
                </div>
            </div>

            <div class="controls-panel">
                <div class="status">
                    <div class="status-item">
                        <span>Vaqt:</span>
                        <span class="status-value" id="time">0.0 s</span>
                    </div>
                    <div class="status-item">
                        <span>Burchak (Œ∏):</span>
                        <span class="status-value" id="angle">0.0¬∞</span>
                    </div>
                    <div class="status-item">
                        <span>Burchak tezligi (œâ):</span>
                        <span class="status-value" id="omega">0.0 rad/s</span>
                    </div>
                    <div class="status-item">
                        <span>Chiziqli tezlik:</span>
                        <span class="status-value" id="velocity">0.0 m/s</span>
                    </div>
                </div>

                <div class="rotation-counter">
                    <h4>Aylanish soni</h4>
                    <div class="rotation-count" id="rotations">0.0</div>
                </div>

                <div class="formula">
                    <div class="formula-title">Asosiy formulalar:</div>
                    <div>$$\omega = \frac{\theta}{t}$$</div>
                    <div>$$\theta = \omega t$$</div>
                    <div>$$v = \omega r$$</div>
                    <div style="margin-top: 10px; font-size: 0.9em;">
                        œâ - burchak tezligi (rad/s)<br>
                        Œ∏ - burchak (rad), t - vaqt (s)<br>
                        r - radius (m), v - chiziqli tezlik (m/s)
                    </div>
                </div>

                <div class="control-group">
                    <h3>Parametrlar</h3>
                    <div class="control-item">
                        <label>Burchak tezligi (œâ) rad/s</label>
                        <input type="range" id="omegaSlider" min="0" max="10" value="1" step="0.1">
                        <div class="value-display">
                            <span>0</span>
                            <span style="font-weight: bold; color: #667eea;" id="omegaVal">1.0</span>
                            <span>10</span>
                        </div>
                    </div>
                    <div class="control-item">
                        <label>Radius (r) m</label>
                        <input type="range" id="radiusSlider" min="0.5" max="3" value="1" step="0.1">
                        <div class="value-display">
                            <span>0.5</span>
                            <span style="font-weight: bold; color: #667eea;" id="radiusVal">1.0</span>
                            <span>3.0</span>
                        </div>
                    </div>
                    <div class="control-item">
                        <label>Animatsiya tezligi</label>
                        <input type="range" id="speedSlider" min="0.1" max="3" value="1" step="0.1">
                        <div class="value-display">
                            <span>0.1x</span>
                            <span style="font-weight: bold; color: #667eea;" id="speedVal">1.0x</span>
                            <span>3.0x</span>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>Tayyor stsenariylar</h3>
                    <div class="presets">
                        <button class="btn-preset" data-omega="0.5">Sekin</button>
                        <button class="btn-preset" data-omega="2">O'rtacha</button>
                        <button class="btn-preset" data-omega="5">Tez</button>
                        <button class="btn-preset" data-omega="8">Juda tez</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const angleChart = document.getElementById('angleChart');
        const angleCtx = angleChart.getContext('2d');
        const omegaChart = document.getElementById('omegaChart');
        const omegaCtx = omegaChart.getContext('2d');

        let omega = 1, radius = 1, angle = 0, time = 0;
        let speed = 1, playing = false;
        let timeData = [], angleData = [];
        const dt = 0.05, maxPoints = 200;
        let cx, cy, scale = 80;

        function resize() {
            if (window.innerWidth <= 480) {
                canvas.height = 250;
                scale = 60;
            } else if (window.innerWidth <= 768) {
                canvas.height = 300;
                scale = 70;
            } else {
                canvas.height = 400;
                scale = 80;
            }
            canvas.width = Math.min(600, canvas.parentElement.getBoundingClientRect().width - 40);
            cx = canvas.width / 2;
            cy = canvas.height / 2;
            draw();
        }

        function updateDisplay() {
            const deg = (angle * 180 / Math.PI) % 360;
            const v = omega * radius;
            const rot = angle / (2 * Math.PI);
            
            document.getElementById('time').textContent = time.toFixed(1) + ' s';
            document.getElementById('angle').textContent = deg.toFixed(1) + '¬∞';
            document.getElementById('omega').textContent = omega.toFixed(1) + ' rad/s';
            document.getElementById('velocity').textContent = v.toFixed(1) + ' m/s';
            document.getElementById('rotations').textContent = rot.toFixed(1);
            document.getElementById('omegaVal').textContent = omega.toFixed(1);
            document.getElementById('radiusVal').textContent = radius.toFixed(1);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Grid
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let x = 0; x <= canvas.width; x += 20) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y <= canvas.height; y += 20) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            // Circle
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(cx, cy, radius * scale, 0, 2 * Math.PI);
            ctx.stroke();

            // Center
            ctx.fillStyle = '#333';
            ctx.beginPath();
            ctx.arc(cx, cy, 5, 0, 2 * Math.PI);
            ctx.fill();

            // Point
            const px = cx + radius * scale * Math.cos(angle);
            const py = cy + radius * scale * Math.sin(angle);

            // Radius line
            ctx.strokeStyle = '#28a745';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(px, py);
            ctx.stroke();

            // Point
            ctx.fillStyle = '#ff4444';
            ctx.beginPath();
            ctx.arc(px, py, 8, 0, 2 * Math.PI);
            ctx.fill();

            // Velocity vector
            if (omega > 0) {
                const vLen = Math.min(60, omega * radius * 10);
                const vAng = angle + Math.PI / 2;
                const vx = px + vLen * Math.cos(vAng);
                const vy = py + vLen * Math.sin(vAng);

                ctx.strokeStyle = '#007bff';
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(px, py);
                ctx.lineTo(vx, vy);
                ctx.stroke();

                ctx.fillStyle = '#007bff';
                ctx.beginPath();
                ctx.moveTo(vx, vy);
                ctx.lineTo(vx - 10 * Math.cos(vAng - 0.3), vy - 10 * Math.sin(vAng - 0.3));
                ctx.lineTo(vx - 10 * Math.cos(vAng + 0.3), vy - 10 * Math.sin(vAng + 0.3));
                ctx.closePath();
                ctx.fill();
            }

            // Angle arc
            if (angle > 0) {
                ctx.strokeStyle = '#ff9800';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(cx, cy, 30, 0, angle);
                ctx.stroke();
            }

            // Labels
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`r = ${radius.toFixed(1)} m`, cx, cy - radius * scale - 20);
            ctx.fillText(`œâ = ${omega.toFixed(1)} rad/s`, cx, 30);
            ctx.fillText(`v = ${(omega * radius).toFixed(1)} m/s`, px, py - 20);
        }

        function drawCharts() {
            // Angle chart
            angleCtx.clearRect(0, 0, angleChart.width, angleChart.height);
            angleCtx.strokeStyle = '#333';
            angleCtx.lineWidth = 2;
            angleCtx.beginPath();
            angleCtx.moveTo(40, 170);
            angleCtx.lineTo(260, 170);
            angleCtx.moveTo(40, 170);
            angleCtx.lineTo(40, 20);
            angleCtx.stroke();

            angleCtx.fillStyle = '#333';
            angleCtx.font = '12px Arial';
            angleCtx.textAlign = 'center';
            angleCtx.fillText('t (s)', 150, 195);
            angleCtx.save();
            angleCtx.translate(15, 100);
            angleCtx.rotate(-Math.PI / 2);
            angleCtx.fillText('Œ∏ (rad)', 0, 0);
            angleCtx.restore();

            if (timeData.length > 1) {
                const maxT = Math.max(...timeData);
                const maxA = Math.max(...angleData);
                const tScale = 220 / maxT;
                const aScale = 150 / maxA;

                angleCtx.strokeStyle = '#ff9800';
                angleCtx.lineWidth = 2;
                angleCtx.beginPath();
                for (let i = 0; i < timeData.length; i++) {
                    const x = 40 + timeData[i] * tScale;
                    const y = 170 - angleData[i] * aScale;
                    if (i === 0) angleCtx.moveTo(x, y);
                    else angleCtx.lineTo(x, y);
                }
                angleCtx.stroke();
            }

            // Omega chart
            omegaCtx.clearRect(0, 0, omegaChart.width, omegaChart.height);
            omegaCtx.strokeStyle = '#333';
            omegaCtx.lineWidth = 2;
            omegaCtx.beginPath();
            omegaCtx.moveTo(40, 170);
            omegaCtx.lineTo(260, 170);
            omegaCtx.moveTo(40, 170);
            omegaCtx.lineTo(40, 20);
            omegaCtx.stroke();

            omegaCtx.fillStyle = '#333';
            omegaCtx.font = '12px Arial';
            omegaCtx.textAlign = 'center';
            omegaCtx.fillText('t (s)', 150, 195);
            omegaCtx.save();
            omegaCtx.translate(15, 100);
            omegaCtx.rotate(-Math.PI / 2);
            omegaCtx.fillText('œâ (rad/s)', 0, 0);
            omegaCtx.restore();

            const omegaY = 170 - (omega / 10) * 150;
            omegaCtx.strokeStyle = '#007bff';
            omegaCtx.lineWidth = 2;
            omegaCtx.beginPath();
            omegaCtx.moveTo(40, omegaY);
            omegaCtx.lineTo(260, omegaY);
            omegaCtx.stroke();
        }

        function animate() {
            if (!playing) return;
            
            time += dt;
            angle = omega * time;
            
            timeData.push(time);
            angleData.push(angle);
            if (timeData.length > maxPoints) {
                timeData.shift();
                angleData.shift();
            }
            
            if (time > 20) reset();
            
            updateDisplay();
            draw();
            drawCharts();
            
            setTimeout(() => requestAnimationFrame(animate), 50 / speed);
        }

        function reset() {
            playing = false;
            time = 0;
            angle = 0;
            timeData = [];
            angleData = [];
            document.getElementById('playBtn').textContent = '‚ñ∂ Boshlash';
            updateDisplay();
            draw();
            drawCharts();
        }

        document.getElementById('playBtn').onclick = () => {
            playing = !playing;
            document.getElementById('playBtn').textContent = playing ? '‚è∏ To\'xtatish' : '‚ñ∂ Boshlash';
            if (playing) animate();
        };

        document.getElementById('pauseBtn').onclick = () => {
            playing = false;
            document.getElementById('playBtn').textContent = '‚ñ∂ Boshlash';
        };

        document.getElementById('resetBtn').onclick = reset;

        document.getElementById('omegaSlider').oninput = e => {
            omega = parseFloat(e.target.value);
            updateDisplay();
        };

        document.getElementById('radiusSlider').oninput = e => {
            radius = parseFloat(e.target.value);
            updateDisplay();
        };

        document.getElementById('speedSlider').oninput = e => {
            speed = parseFloat(e.target.value);
            document.getElementById('speedVal').textContent = speed.toFixed(1) + 'x';
        };

        document.querySelectorAll('.btn-preset').forEach(btn => {
            btn.onclick = e => {
                omega = parseFloat(e.target.dataset.omega);
                document.getElementById('omegaSlider').value = omega;
                updateDisplay();
            };
        });

        document.addEventListener('keydown', e => {
            if (e.code === 'Space') {
                e.preventDefault();
                document.getElementById('playBtn').click();
            } else if (e.code === 'KeyR') {
                reset();
            }
        });

        window.addEventListener('resize', resize);
        
        resize();
        updateDisplay();
        drawCharts();
        
        if (window.MathJax) MathJax.typesetPromise();
    </script>
</body>
</html>
