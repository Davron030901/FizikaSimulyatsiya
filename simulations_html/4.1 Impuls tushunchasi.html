<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Impuls Simulyatsiyasi</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 8px;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            padding: 15px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(to bottom, #e3f2fd 0%, #f8f9fa 100%);
            overflow: hidden;
            touch-action: none;
        }

        #canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .controls {
            background: #f8f9fa;
            padding: 12px;
        }

        .control-group {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 3px solid #667eea;
        }

        .control-group h3 {
            font-size: 0.95em;
            color: #333;
            margin-bottom: 10px;
        }

        .slider-container {
            margin-bottom: 10px;
        }

        .slider-container label {
            display: block;
            font-size: 0.85em;
            color: #555;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .slider-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 3px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #667eea;
            border-radius: 50%;
            cursor: pointer;
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #667eea;
            border-radius: 50%;
            border: none;
        }

        .value {
            min-width: 65px;
            text-align: center;
            font-weight: bold;
            color: #667eea;
            font-size: 0.85em;
            padding: 4px 8px;
            background: #f0f0f0;
            border-radius: 5px;
        }

        .presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 10px;
        }

        .preset-btn {
            padding: 10px 5px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            font-size: 0.8em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .preset-btn:active {
            background: #667eea;
            color: white;
            transform: scale(0.95);
        }

        .buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-play {
            background: #27ae60;
            color: white;
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .values {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            padding: 12px;
            background: #f8f9fa;
        }

        .value-card {
            background: white;
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .value-card h4 {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 4px;
        }

        .value-card .val {
            font-size: 1em;
            font-weight: bold;
            color: #667eea;
        }

        .tabs {
            display: flex;
            overflow-x: auto;
            gap: 5px;
            padding: 10px 12px;
            background: #f8f9fa;
            -webkit-overflow-scrolling: touch;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 8px 15px;
            border: none;
            background: #e9ecef;
            border-radius: 20px;
            font-size: 0.85em;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .content {
            display: none;
            padding: 15px;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .content.active {
            display: block;
        }

        .formula {
            background: #f0f4ff;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid #667eea;
            font-size: 0.9em;
        }

        .objects {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .object {
            text-align: center;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85em;
        }

        .object:active {
            border-color: #667eea;
            background: #f0f4ff;
            transform: scale(0.95);
        }

        .object-icon {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .info {
            padding: 12px;
            background: #e3f2fd;
            border-radius: 8px;
            font-size: 0.85em;
            margin: 10px 0;
            line-height: 1.5;
        }

        @media (max-width: 360px) {
            .header h1 { font-size: 1.3em; }
            .presets { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° Impuls Simulyatsiyasi</h1>
            <p>p‚Éó = mv‚Éó</p>
        </div>

        <div class="canvas-container">
            <canvas id="canvas"></canvas>
        </div>

        <div class="controls">
            <div class="control-group">
                <h3>üî¥ Jism 1</h3>
                <div class="slider-container">
                    <label>Massa (kg):</label>
                    <div class="slider-row">
                        <input type="range" class="slider" id="m1" min="0.1" max="10" step="0.1" value="2">
                        <span class="value" id="m1v">2.0</span>
                    </div>
                </div>
                <div class="slider-container">
                    <label>Tezlik (m/s):</label>
                    <div class="slider-row">
                        <input type="range" class="slider" id="v1" min="-10" max="10" step="0.1" value="3">
                        <span class="value" id="v1v">3.0</span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <h3>üîµ Jism 2</h3>
                <div class="slider-container">
                    <label>Massa (kg):</label>
                    <div class="slider-row">
                        <input type="range" class="slider" id="m2" min="0.1" max="10" step="0.1" value="1.5">
                        <span class="value" id="m2v">1.5</span>
                    </div>
                </div>
                <div class="slider-container">
                    <label>Tezlik (m/s):</label>
                    <div class="slider-row">
                        <input type="range" class="slider" id="v2" min="-10" max="10" step="0.1" value="-2">
                        <span class="value" id="v2v">-2.0</span>
                    </div>
                </div>
            </div>

            <div class="control-group">
                <h3>üìã Tayyor Misollar</h3>
                <div class="presets">
                    <button class="preset-btn" onclick="preset('person')">üö∂ Odam</button>
                    <button class="preset-btn" onclick="preset('bicycle')">üö¥ Velosiped</button>
                    <button class="preset-btn" onclick="preset('football')">‚öΩ To'p</button>
                    <button class="preset-btn" onclick="preset('car')">üöó Mashina</button>
                    <button class="preset-btn" onclick="preset('motorbike')">üèçÔ∏è Moto</button>
                    <button class="preset-btn" onclick="preset('truck')">üöõ Yuk</button>
                </div>
            </div>

            <div class="buttons">
                <button class="btn btn-play" id="playBtn" onclick="toggle()">‚ñ∂Ô∏è Boshlash</button>
                <button class="btn btn-reset" onclick="reset()">üîÑ Qayta</button>
            </div>
        </div>

        <div class="values">
            <div class="value-card">
                <h4>Jism 1 Impulsi</h4>
                <div class="val" id="p1">6.0 kg¬∑m/s</div>
            </div>
            <div class="value-card">
                <h4>Jism 2 Impulsi</h4>
                <div class="val" id="p2">-3.0 kg¬∑m/s</div>
            </div>
            <div class="value-card">
                <h4>Umumiy Impuls</h4>
                <div class="val" id="pt">3.0 kg¬∑m/s</div>
            </div>
            <div class="value-card">
                <h4>Impuls Nisbati</h4>
                <div class="val" id="pr">2.00</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab(0)">üìö Nazariya</button>
            <button class="tab" onclick="showTab(1)">üìê Formulalar</button>
            <button class="tab" onclick="showTab(2)">‚öñÔ∏è Taqqoslash</button>
        </div>

        <div class="content active" id="tab0">
            <h3>Impuls nima?</h3>
            <p>Impuls (momentum) - jismning harakat miqdori. Bu vektor kattalik bo'lib, jismning massasi va tezligiga bog'liq.</p>
            
            <div class="formula">
                <strong>Asosiy formula:</strong><br>
                p‚Éó = m √ó v‚Éó
            </div>

            <div class="info">
                <strong>Xususiyatlar:</strong><br>
                ‚Ä¢ Vektor kattalik (yo'nalishga ega)<br>
                ‚Ä¢ Tezlik yo'nalishida<br>
                ‚Ä¢ Massa ‚Üë ‚Üí Impuls ‚Üë<br>
                ‚Ä¢ Tezlik ‚Üë ‚Üí Impuls ‚Üë
            </div>
        </div>

        <div class="content" id="tab1">
            <h3>Formulalar</h3>
            
            <div class="formula">
                <strong>1. Impuls:</strong><br>
                p‚Éó = m √ó v‚Éó
            </div>

            <div class="formula">
                <strong>2. Impuls o'zgarishi:</strong><br>
                Œîp‚Éó = p‚ÇÇ - p‚ÇÅ = m(v‚ÇÇ - v‚ÇÅ)
            </div>

            <div class="formula">
                <strong>3. Impuls va kuch:</strong><br>
                F‚Éó = Œîp‚Éó/Œît = ma‚Éó
            </div>

            <div class="formula">
                <strong>4. Saqlanish qonuni:</strong><br>
                p‚ÇÅ + p‚ÇÇ = const
            </div>

            <div class="info">
                <strong>Birlik:</strong> kg¬∑m/s yoki N¬∑s
            </div>
        </div>

        <div class="content" id="tab2">
            <h3>Jismlar taqqoslash</h3>
            <p>Jismni tanlang:</p>
            
            <div class="objects">
                <div class="object" onclick="selectObj('ping-pong')">
                    <div class="object-icon">üèì</div>
                    <div>Ping-pong</div>
                    <small>2.7g, 15 m/s</small>
                </div>
                <div class="object" onclick="selectObj('tennis')">
                    <div class="object-icon">üéæ</div>
                    <div>Tennis</div>
                    <small>57g, 25 m/s</small>
                </div>
                <div class="object" onclick="selectObj('football')">
                    <div class="object-icon">‚öΩ</div>
                    <div>Futbol</div>
                    <small>450g, 30 m/s</small>
                </div>
                <div class="object" onclick="selectObj('basketball')">
                    <div class="object-icon">üèÄ</div>
                    <div>Basketbol</div>
                    <small>625g, 15 m/s</small>
                </div>
                <div class="object" onclick="selectObj('person')">
                    <div class="object-icon">üö∂</div>
                    <div>Odam</div>
                    <small>70kg, 5 m/s</small>
                </div>
                <div class="object" onclick="selectObj('bicycle')">
                    <div class="object-icon">üö¥</div>
                    <div>Velosiped</div>
                    <small>15kg, 8 m/s</small>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let animating = false;
        let animId;

        const obj = [
            { x: 0, y: 0, m: 2, v: 3, r: 20, c: '#ff6b6b', trail: [], emoji: 'üî¥' },
            { x: 0, y: 0, m: 1.5, v: -2, r: 15, c: '#4ecdc4', trail: [], emoji: 'üîµ' }
        ];

        const objTypes = ['default', 'default'];

        const objData = {
            'ping-pong': { m: 0.0027, v: 15, e: 'üèì' },
            'tennis': { m: 0.057, v: 25, e: 'üéæ' },
            'football': { m: 0.45, v: 30, e: '‚öΩ' },
            'basketball': { m: 0.625, v: 15, e: 'üèÄ' },
            'person': { m: 70, v: 5, e: 'üö∂' },
            'bicycle': { m: 15, v: 8, e: 'üö¥' },
            'car': { m: 1500, v: 20, e: 'üöó' },
            'truck': { m: 8000, v: 15, e: 'üöõ' },
            'motorbike': { m: 150, v: 25, e: 'üèçÔ∏è' }
        };

        function resize() {
            const container = canvas.parentElement;
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            obj[0].x = canvas.width * 0.2;
            obj[0].y = canvas.height / 2;
            obj[1].x = canvas.width * 0.8;
            obj[1].y = canvas.height / 2;
        }

        function init() {
            resize();
            
            ['m1', 'v1', 'm2', 'v2'].forEach(id => {
                document.getElementById(id).addEventListener('input', update);
            });

            window.addEventListener('resize', resize);
            
            draw();
            updateVals();
        }

        function update() {
            obj[0].m = parseFloat(document.getElementById('m1').value);
            obj[0].v = parseFloat(document.getElementById('v1').value);
            obj[1].m = parseFloat(document.getElementById('m2').value);
            obj[1].v = parseFloat(document.getElementById('v2').value);

            document.getElementById('m1v').textContent = obj[0].m.toFixed(1);
            document.getElementById('v1v').textContent = obj[0].v.toFixed(1);
            document.getElementById('m2v').textContent = obj[1].m.toFixed(1);
            document.getElementById('v2v').textContent = obj[1].v.toFixed(1);

            obj[0].r = Math.sqrt(obj[0].m) * 8 + 5;
            obj[1].r = Math.sqrt(obj[1].m) * 8 + 5;

            updateVals();
            draw();
        }

        function updateVals() {
            const p1 = obj[0].m * obj[0].v;
            const p2 = obj[1].m * obj[1].v;
            const total = p1 + p2;
            const ratio = Math.abs(p1 / p2);

            document.getElementById('p1').textContent = p1.toFixed(1) + ' kg¬∑m/s';
            document.getElementById('p2').textContent = p2.toFixed(1) + ' kg¬∑m/s';
            document.getElementById('pt').textContent = total.toFixed(1) + ' kg¬∑m/s';
            document.getElementById('pr').textContent = ratio.toFixed(2);
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Grid
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let x = 0; x < canvas.width; x += 40) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            for (let y = 0; y < canvas.height; y += 40) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }

            obj.forEach(o => {
                // Trail
                if (o.trail.length > 1) {
                    ctx.strokeStyle = o.c + '40';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(o.trail[0].x, o.trail[0].y);
                    for (let i = 1; i < o.trail.length; i++) {
                        ctx.lineTo(o.trail[i].x, o.trail[i].y);
                    }
                    ctx.stroke();
                }

                // Object
                ctx.fillStyle = o.c;
                ctx.beginPath();
                ctx.arc(o.x, o.y, o.r, 0, Math.PI * 2);
                ctx.fill();

                // Emoji
                ctx.font = `${o.r * 1.2}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(o.emoji, o.x, o.y);

                // Velocity vector
                const endX = o.x + o.v * 15;
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(o.x, o.y);
                ctx.lineTo(endX, o.y);
                ctx.stroke();

                const angle = Math.atan2(0, endX - o.x);
                ctx.beginPath();
                ctx.moveTo(endX, o.y);
                ctx.lineTo(endX - 8 * Math.cos(angle - Math.PI / 6), o.y - 8 * Math.sin(angle - Math.PI / 6));
                ctx.moveTo(endX, o.y);
                ctx.lineTo(endX - 8 * Math.cos(angle + Math.PI / 6), o.y - 8 * Math.sin(angle + Math.PI / 6));
                ctx.stroke();

                // Momentum vector
                const p = o.m * o.v;
                const pEndX = o.x + p * 4;
                ctx.strokeStyle = '#667eea';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(o.x, o.y - 25);
                ctx.lineTo(pEndX, o.y - 25);
                ctx.stroke();
            });

            // Info
            ctx.fillStyle = '#333';
            ctx.font = '11px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('Qora: tezlik (v‚Éó)', 5, 15);
            ctx.fillText('Binafsha: impuls (p‚Éó)', 5, 30);
        }

        function toggle() {
            animating = !animating;
            const btn = document.getElementById('playBtn');
            if (animating) {
                btn.textContent = '‚è∏Ô∏è To\'xtatish';
                animate();
            } else {
                btn.textContent = '‚ñ∂Ô∏è Boshlash';
                cancelAnimationFrame(animId);
            }
        }

        function animate() {
            if (!animating) return;

            obj.forEach(o => {
                o.x += o.v * 0.4;
                o.trail.push({ x: o.x, y: o.y });
                if (o.trail.length > 80) o.trail.shift();
            });

            collision();

            obj.forEach(o => {
                if (o.x <= o.r || o.x >= canvas.width - o.r) {
                    o.v *= -0.8;
                    o.x = Math.max(o.r, Math.min(canvas.width - o.r, o.x));
                }
            });

            draw();
            updateVals();
            animId = requestAnimationFrame(animate);
        }

        function collision() {
            const dx = obj[1].x - obj[0].x;
            const dy = obj[1].y - obj[0].y;
            const dist = Math.sqrt(dx * dx + dy * dy);

            if (dist < obj[0].r + obj[1].r) {
                const overlap = obj[0].r + obj[1].r - dist;
                const sepX = (dx / dist) * overlap * 0.5;
                const sepY = (dy / dist) * overlap * 0.5;

                obj[0].x -= sepX;
                obj[0].y -= sepY;
                obj[1].x += sepX;
                obj[1].y += sepY;

                const m1 = obj[0].m, m2 = obj[1].m;
                const v1 = obj[0].v, v2 = obj[1].v;

                obj[0].v = ((m1 - m2) * v1 + 2 * m2 * v2) / (m1 + m2) * 0.9;
                obj[1].v = ((m2 - m1) * v2 + 2 * m1 * v1) / (m1 + m2) * 0.9;

                document.getElementById('v1').value = obj[0].v;
                document.getElementById('v2').value = obj[1].v;
                update();
            }
        }

        function reset() {
            animating = false;
            cancelAnimationFrame(animId);
            document.getElementById('playBtn').textContent = '‚ñ∂Ô∏è Boshlash';

            resize();
            obj[0].v = 3;
            obj[0].m = 2;
            obj[0].trail = [];
            obj[0].emoji = 'üî¥';
            obj[1].v = -2;
            obj[1].m = 1.5;
            obj[1].trail = [];
            obj[1].emoji = 'üîµ';

            document.getElementById('m1').value = 2;
            document.getElementById('v1').value = 3;
            document.getElementById('m2').value = 1.5;
            document.getElementById('v2').value = -2;

            update();
        }

        function preset(type) {
            const presets = {
                person: [0.7, 5, 0.8, -4],
                bicycle: [0.15, 8, 0.7, -5],
                football: [0.45, 30, 0.45, -25],
                car: [1.5, 20, 1.2, -15],
                motorbike: [0.15, 25, 0.7, -20],
                truck: [8, 15, 1.5, -20]
            };

            const vals = presets[type];
            if (vals) {
                document.getElementById('m1').value = vals[0];
                document.getElementById('v1').value = vals[1];
                document.getElementById('m2').value = vals[2];
                document.getElementById('v2').value = vals[3];
                update();
            }
        }

        function showTab(idx) {
            document.querySelectorAll('.tab').forEach((t, i) => {
                t.classList.toggle('active', i === idx);
            });
            document.querySelectorAll('.content').forEach((c, i) => {
                c.classList.toggle('active', i === idx);
            });
        }

        function selectObj(type) {
            const data = objData[type];
            if (data) {
                const m = Math.max(0.1, Math.min(10, data.m / 100));
                const v = Math.max(-10, Math.min(10, data.v));
                document.getElementById('m1').value = m;
                document.getElementById('v1').value = v;
                obj[0].emoji = data.e;
                update();
            }
        }

        window.addEventListener('load', init);
    </script>
</body>
</html>
