<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyutonning birinchi qonuni (Inersiya)</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            touch-action: manipulation;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 10px; }
        .header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .header h1 { color: #2c3e50; font-size: clamp(1.5rem, 4vw, 2.5rem); margin-bottom: 10px; }
        .header p { color: #7f8c8d; font-size: clamp(0.9rem, 2vw, 1.1rem); }
        .sim-box {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .canvas-wrap {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
            position: relative;
            overflow: hidden;
        }
        #canvas {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 100%);
            cursor: pointer;
            touch-action: none;
        }
        .info-panel {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
        }
        .legend {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 8px;
            font-size: 0.8rem;
        }
        .legend-item { display: flex; align-items: center; gap: 5px; margin-bottom: 5px; }
        .legend-color { width: 12px; height: 3px; border-radius: 2px; }
        .status {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .status-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        .status-val { font-weight: 600; color: #1976D2; }
        .controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .ctrl-group {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 15px;
            border: 1px solid #e9ecef;
        }
        .ctrl-group h3 { color: #2c3e50; margin-bottom: 15px; font-size: 1.1rem; }
        .ctrl-item { margin-bottom: 15px; }
        .ctrl-item label { display: block; color: #495057; font-weight: 500; margin-bottom: 5px; font-size: 0.9rem; }
        .slider-row { display: flex; align-items: center; gap: 10px; }
        .slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        .slider:hover { opacity: 1; }
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .val-display {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #495057;
            min-width: 80px;
            text-align: center;
        }
        .btn-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }
        .btn-primary { background: linear-gradient(45deg, #4CAF50, #45a049); }
        .btn-secondary { background: linear-gradient(45deg, #2196F3, #1976D2); }
        .btn-danger { background: linear-gradient(45deg, #f44336, #d32f2f); }
        .btn-warning { background: linear-gradient(45deg, #ff9800, #f57c00); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .btn:active { transform: translateY(0); }
        .chk-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
        .chk { width: 18px; height: 18px; cursor: pointer; }
        .theory {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .theory h2 { color: #2c3e50; margin-bottom: 15px; font-size: 1.4rem; }
        .theory-txt { line-height: 1.6; color: #495057; }
        .formula {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        @media (max-width: 768px) {
            .container { padding: 5px; }
            #canvas { height: 300px; }
            .controls { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>2.1 Nyutonning birinchi qonuni (Inersiya)</h1>
            <p>Jism o'zining tinchlik holatini yoki tekis to'g'ri chiziqli harakat holatini saqlaydi</p>
        </div>

        <div class="sim-box">
            <div class="btn-group" style="margin-bottom: 20px;">
                <button class="btn btn-primary" id="btnUniform">Tekis harakat</button>
                <button class="btn btn-secondary" id="btnRest">Tinchlik holati</button>
                <button class="btn btn-warning" id="btnForce">Kuch ta'siri</button>
                <button class="btn btn-danger" id="btnFriction">Ishqalanish</button>
            </div>

            <div class="canvas-wrap">
                <canvas id="canvas"></canvas>
                <div class="info-panel">
                    <div><strong>Jism:</strong> Kub</div>
                    <div><strong>Massa:</strong> <span id="dispMass">1.0</span> kg</div>
                    <div><strong>Tezlik:</strong> <span id="dispVel">0.0</span> m/s</div>
                </div>
                <div class="legend">
                    <div class="legend-item"><div class="legend-color" style="background:#f44;"></div><span>Kuch (F)</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#44f;"></div><span>Tezlik (v)</span></div>
                    <div class="legend-item"><div class="legend-color" style="background:#f80;"></div><span>Ishqalanish (f)</span></div>
                </div>
            </div>

            <div class="status">
                <div class="status-row"><span>Harakat holati:</span><span class="status-val" id="stMotion">Tinch</span></div>
                <div class="status-row"><span>Natijaviy kuch:</span><span class="status-val" id="stForce">0.0 N</span></div>
                <div class="status-row"><span>Tezlanish:</span><span class="status-val" id="stAccel">0.0 m/s¬≤</span></div>
                <div class="status-row"><span>Inersiya:</span><span class="status-val" id="stInert">Maksimal</span></div>
            </div>

            <div class="controls">
                <div class="ctrl-group">
                    <h3>üéÆ Boshqaruv</h3>
                    <div class="btn-group">
                        <button class="btn btn-primary" id="playBtn">‚ñ∂ Boshlash</button>
                        <button class="btn btn-secondary" id="resetBtn">üîÑ Qayta</button>
                        <button class="btn btn-warning" id="stepBtn">‚è≠ Qadam</button>
                    </div>
                    <div class="ctrl-item">
                        <label>Tezlik (0.1x - 5x):</label>
                        <div class="slider-row">
                            <input type="range" class="slider" id="slSpeed" min="0.1" max="5" step="0.1" value="1">
                            <div class="val-display" id="vSpeed">1.0x</div>
                        </div>
                    </div>
                </div>

                <div class="ctrl-group">
                    <h3>‚öñÔ∏è Jism</h3>
                    <div class="ctrl-item">
                        <label>Massa (0.1 - 10 kg):</label>
                        <div class="slider-row">
                            <input type="range" class="slider" id="slMass" min="0.1" max="10" step="0.1" value="1">
                            <div class="val-display" id="vMass">1.0 kg</div>
                        </div>
                    </div>
                    <div class="ctrl-item">
                        <label>Boshlang'ich tezlik (0-20 m/s):</label>
                        <div class="slider-row">
                            <input type="range" class="slider" id="slVel" min="0" max="20" step="0.5" value="0">
                            <div class="val-display" id="vVel">0.0 m/s</div>
                        </div>
                    </div>
                </div>

                <div class="ctrl-group">
                    <h3>üîß Kuchlar</h3>
                    <div class="ctrl-item">
                        <label>Qo'llaniladigan kuch (-50 - 50 N):</label>
                        <div class="slider-row">
                            <input type="range" class="slider" id="slForce" min="-50" max="50" step="1" value="0">
                            <div class="val-display" id="vForce">0.0 N</div>
                        </div>
                    </div>
                    <div class="chk-row">
                        <input type="checkbox" class="chk" id="chkFric" checked>
                        <label for="chkFric">Ishqalanish mavjud</label>
                    </div>
                    <div class="ctrl-item">
                        <label>Ishqalanish koeffitsienti (0-1):</label>
                        <div class="slider-row">
                            <input type="range" class="slider" id="slFric" min="0" max="1" step="0.01" value="0.1">
                            <div class="val-display" id="vFric">0.10</div>
                        </div>
                    </div>
                </div>

                <div class="ctrl-group">
                    <h3>üìä Ko'rsatish</h3>
                    <div class="chk-row">
                        <input type="checkbox" class="chk" id="chkVec" checked>
                        <label for="chkVec">Vektorlarni ko'rsatish</label>
                    </div>
                    <div class="chk-row">
                        <input type="checkbox" class="chk" id="chkTrail" checked>
                        <label for="chkTrail">Harakat izini ko'rsatish</label>
                    </div>
                    <div class="chk-row">
                        <input type="checkbox" class="chk" id="chkGrid">
                        <label for="chkGrid">To'rni ko'rsatish</label>
                    </div>
                    <div class="chk-row">
                        <input type="checkbox" class="chk" id="chkMeas">
                        <label for="chkMeas">O'lchovlarni ko'rsatish</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="theory">
            <h2>üß† Nazariy ma'lumotlar</h2>
            <div class="theory-txt">
                <p><strong>Nyutonning birinchi qonuni (Inersiya qonuni):</strong></p>
                <div class="formula">
                    <p>Agar jismga ta'sir qiluvchi barcha kuchlarning natijaviy kuchi nolga teng bo'lsa, jism o'zining tinchlik holatini yoki tekis to'g'ri chiziqli harakat holatini saqlaydi.</p>
                </div>
                
                <p><strong>Matematik ifoda:</strong></p>
                <div class="formula">$$\sum \vec{F} = 0 \Rightarrow \vec{v} = \text{const}$$</div>

                <p><strong>Inersiya:</strong> Jismning o'zining harakat holatini o'zgartirishga qarshilik ko'rsatish xususiyati.</p>
                
                <p><strong>Asosiy tushunchalar:</strong></p>
                <ul style="margin-left:20px; margin-top:10px;">
                    <li>Massa - jismning inertsiyalik o'lchovi</li>
                    <li>Kuch - jismning harakat holatini o'zgartiradigan ta'sir</li>
                    <li>Ishqalanish - harakatga qarshi yo'nalgan kuch</li>
                    <li>Muvozanat - barcha kuchlar natijaviy kuchi nolga teng</li>
                </ul>

                <p><strong>Haqiqiy hayotdagi misollar:</strong></p>
                <ul style="margin-left:20px; margin-top:10px;">
                    <li>Avtomobil to'satdan to'xtaganda yo'lovchilar oldinga siljiydi</li>
                    <li>Kosmik kemalar kuchsiz fazoda tekis harakat qiladi</li>
                    <li>Stol ustidagi kitob o'z holatini saqlaydi</li>
                    <li>Har qanday transport vositasida inersiya kuchi seziladi</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const c = document.getElementById('canvas');
        const ctx = c.getContext('2d');
        
        function resize() {
            const r = c.getBoundingClientRect();
            c.width = r.width;
            c.height = r.height;
        }
        resize();
        window.addEventListener('resize', resize);

        let sim = {
            run: false,
            spd: 1,
            t: 0,
            obj: { x:50, y:200, w:40, h:40, m:1, v:0, a:0 },
            f: { app:0, fric:0, net:0 },
            fric: { on:true, k:0.1, n:9.8 },
            trail: [],
            maxT: 200,
            vec: true,
            tr: true,
            grid: false,
            meas: false
        };

        const el = {
            playBtn: document.getElementById('playBtn'),
            resetBtn: document.getElementById('resetBtn'),
            stepBtn: document.getElementById('stepBtn'),
            btnUniform: document.getElementById('btnUniform'),
            btnRest: document.getElementById('btnRest'),
            btnForce: document.getElementById('btnForce'),
            btnFriction: document.getElementById('btnFriction'),
            slSpeed: document.getElementById('slSpeed'),
            vSpeed: document.getElementById('vSpeed'),
            slMass: document.getElementById('slMass'),
            vMass: document.getElementById('vMass'),
            slVel: document.getElementById('slVel'),
            vVel: document.getElementById('vVel'),
            slForce: document.getElementById('slForce'),
            vForce: document.getElementById('vForce'),
            chkFric: document.getElementById('chkFric'),
            slFric: document.getElementById('slFric'),
            vFric: document.getElementById('vFric'),
            chkVec: document.getElementById('chkVec'),
            chkTrail: document.getElementById('chkTrail'),
            chkGrid: document.getElementById('chkGrid'),
            chkMeas: document.getElementById('chkMeas'),
            dispMass: document.getElementById('dispMass'),
            dispVel: document.getElementById('dispVel'),
            stMotion: document.getElementById('stMotion'),
            stForce: document.getElementById('stForce'),
            stAccel: document.getElementById('stAccel'),
            stInert: document.getElementById('stInert')
        };

        el.slSpeed.oninput = e => { sim.spd = parseFloat(e.target.value); el.vSpeed.textContent = sim.spd.toFixed(1)+'x'; };
        el.slMass.oninput = e => { sim.obj.m = parseFloat(e.target.value); el.vMass.textContent = sim.obj.m.toFixed(1)+' kg'; upd(); };
        el.slVel.oninput = e => { sim.obj.v = parseFloat(e.target.value); el.vVel.textContent = sim.obj.v.toFixed(1)+' m/s'; };
        el.slForce.oninput = e => { sim.f.app = parseFloat(e.target.value); el.vForce.textContent = sim.f.app.toFixed(1)+' N'; upd(); };
        el.chkFric.onchange = e => { sim.fric.on = e.target.checked; upd(); };
        el.slFric.oninput = e => { sim.fric.k = parseFloat(e.target.value); el.vFric.textContent = sim.fric.k.toFixed(2); upd(); };
        el.chkVec.onchange = e => sim.vec = e.target.checked;
        el.chkTrail.onchange = e => sim.tr = e.target.checked;
        el.chkGrid.onchange = e => sim.grid = e.target.checked;
        el.chkMeas.onchange = e => sim.meas = e.target.checked;

        let drag = false, sx = 0, sy = 0;
        c.ontouchstart = e => {
            e.preventDefault();
            const t = e.touches[0], r = c.getBoundingClientRect();
            sx = t.clientX - r.left; sy = t.clientY - r.top;
            if(sx>=sim.obj.x && sx<=sim.obj.x+sim.obj.w && sy>=sim.obj.y && sy<=sim.obj.y+sim.obj.h) drag=true;
        };
        c.ontouchmove = e => {
            e.preventDefault();
            if(!drag) return;
            const t = e.touches[0], r = c.getBoundingClientRect();
            const tx = t.clientX - r.left, ty = t.clientY - r.top;
            sim.obj.x = Math.max(0, Math.min(c.width-sim.obj.w, sim.obj.x+tx-sx));
            sim.obj.y = Math.max(0, Math.min(c.height-sim.obj.h, sim.obj.y+ty-sy));
            sx = tx; sy = ty;
        };
        c.ontouchend = () => drag=false;
        c.onclick = e => {
            const r = c.getBoundingClientRect();
            sim.obj.x = Math.max(0, Math.min(c.width-sim.obj.w, e.clientX-r.left-sim.obj.w/2));
            sim.obj.y = Math.max(0, Math.min(c.height-sim.obj.h, e.clientY-r.top-sim.obj.h/2));
        };

        function upd() {
            if(sim.fric.on && Math.abs(sim.obj.v)>0.001) {
                const d = sim.obj.v>0 ? -1:1;
                sim.f.fric = d*sim.fric.k*sim.obj.m*sim.fric.n;
            } else sim.f.fric = 0;
            
            sim.f.net = sim.f.app + sim.f.fric;
            sim.obj.a = sim.f.net / sim.obj.m;
            
            if(sim.run) {
                const dt = 0.016*sim.spd;
                sim.obj.v += sim.obj.a*dt;
                sim.obj.x += sim.obj.v*dt*10;
                
                if(sim.obj.x<=0) { sim.obj.x=0; sim.obj.v=0; }
                if(sim.obj.x>=c.width-sim.obj.w) { sim.obj.x=c.width-sim.obj.w; sim.obj.v=0; }
                
                if(sim.tr) {
                    sim.trail.push({x:sim.obj.x+sim.obj.w/2, y:sim.obj.y+sim.obj.h/2, t:sim.t});
                    if(sim.trail.length>sim.maxT) sim.trail.shift();
                }
                sim.t += dt;
            }
            updSt();
        }

        function updSt() {
            el.dispMass.textContent = sim.obj.m.toFixed(1);
            el.dispVel.textContent = sim.obj.v.toFixed(1);
            el.stForce.textContent = sim.f.net.toFixed(1)+' N';
            el.stAccel.textContent = sim.obj.a.toFixed(1)+' m/s¬≤';
            
            if(Math.abs(sim.obj.v)<0.01) el.stMotion.textContent='Tinch';
            else if(Math.abs(sim.obj.a)<0.01) el.stMotion.textContent='Tekis harakat';
            else el.stMotion.textContent='Tezlanuvchan harakat';
            
            el.stInert.textContent = Math.abs(sim.f.net)<0.01 ? 'Maksimal':'Kamaygan';
        }

        function drawGrid() {
            if(!sim.grid) return;
            ctx.strokeStyle='#ddd'; ctx.lineWidth=1;
            for(let x=0; x<=c.width; x+=50) {
                ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,c.height); ctx.stroke();
            }
            for(let y=0; y<=c.height; y+=50) {
                ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(c.width,y); ctx.stroke();
            }
        }

        function drawTrail() {
            if(!sim.tr || sim.trail.length<2) return;
            ctx.strokeStyle='rgba(76,175,80,0.5)'; ctx.lineWidth=2; ctx.beginPath();
            sim.trail.forEach((p,i) => i===0 ? ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));
            ctx.stroke();
        }

        function drawObj() {
            const o = sim.obj;
            const i = Math.min(255, 100+o.m*50);
            ctx.fillStyle = `rgb(${i},${200-i/2},100)`;
            ctx.fillRect(o.x,o.y,o.w,o.h);
            ctx.strokeStyle='#333'; ctx.lineWidth=2;
            ctx.strokeRect(o.x,o.y,o.w,o.h);
            ctx.fillStyle='#333'; ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText(o.m.toFixed(1)+'kg', o.x+o.w/2, o.y+o.h/2+4);
        }

        function drawVec(x,y,m,a,col,lbl) {
            const len=Math.abs(m), dir=m>=0?1:-1;
            if(len<1) return;
            ctx.strokeStyle=col; ctx.fillStyle=col; ctx.lineWidth=3;
            const ex=x+dir*len, ey=y;
            ctx.beginPath(); ctx.moveTo(x,y); ctx.lineTo(ex,ey); ctx.stroke();
            const sz=8;
            ctx.beginPath(); ctx.moveTo(ex,ey); 
            ctx.lineTo(ex-dir*sz,ey-sz/2); ctx.lineTo(ex-dir*sz,ey+sz/2);
            ctx.closePath(); ctx.fill();
            ctx.font='12px Arial'; ctx.textAlign='center';
            ctx.fillText(lbl, ex+dir*15, ey-5);
            ctx.fillText(m.toFixed(1), ex+dir*15, ey+10);
        }

        function drawVecs() {
            if(!sim.vec) return;
            const o=sim.obj, cx=o.x+o.w/2, cy=o.y+o.h/2, sc=2;
            if(Math.abs(sim.f.app)>0.1) drawVec(cx,cy,sim.f.app*sc,0,'#f44','F');
            if(Math.abs(o.v)>0.1) drawVec(cx,cy-30,o.v*sc,0,'#44f','v');
            if(Math.abs(sim.f.fric)>0.1) drawVec(cx,cy+30,sim.f.fric*sc,0,'#f80','f');
        }

        function drawMeas() {
            if(!sim.meas) return;
            ctx.fillStyle='#333'; ctx.font='12px Arial'; ctx.textAlign='left';
            const m = [
                `Vaqt: ${sim.t.toFixed(1)}s`,
                `Pozitsiya: ${(sim.obj.x/10).toFixed(1)}m`,
                `Tezlik: ${sim.obj.v.toFixed(1)}m/s`,
                `Tezlanish: ${sim.obj.a.toFixed(1)}m/s¬≤`,
                `Natijaviy kuch: ${sim.f.net.toFixed(1)}N`
            ];
            m.forEach((txt,i) => ctx.fillText(txt, 10, c.height-100+i*20));
        }

        function render() {
            ctx.clearRect(0,0,c.width,c.height);
            const g = ctx.createLinearGradient(0,0,0,c.height);
            g.addColorStop(0,'#87CEEB'); g.addColorStop(1,'#98FB98');
            ctx.fillStyle=g; ctx.fillRect(0,0,c.width,c.height);
            drawGrid(); drawTrail(); drawObj(); drawVecs(); drawMeas();
            upd();
            requestAnimationFrame(render);
        }

        el.playBtn.onclick = () => {
            sim.run = !sim.run;
            el.playBtn.textContent = sim.run ? '‚è∏ To\'xtatish':'‚ñ∂ Boshlash';
        };

        el.resetBtn.onclick = () => {
            sim.run=false; sim.t=0; sim.obj.x=50; sim.obj.y=200; sim.obj.v=0; sim.obj.a=0; sim.trail=[];
            el.playBtn.textContent='‚ñ∂ Boshlash'; upd();
        };

        el.stepBtn.onclick = () => {
            if(!sim.run) {
                upd();
                const dt=0.016*sim.spd;
                sim.obj.v+=sim.obj.a*dt;
                sim.obj.x+=sim.obj.v*dt*10;
                if(sim.obj.x<=0) { sim.obj.x=0; sim.obj.v=0; }
                if(sim.obj.x>=c.width-sim.obj.w) { sim.obj.x=c.width-sim.obj.w; sim.obj.v=0; }
                sim.t+=dt;
            }
        };

        el.btnUniform.onclick = () => {
            el.resetBtn.onclick();
            sim.obj.v=10; sim.f.app=0; sim.fric.on=false;
            el.slVel.value=10; el.vVel.textContent='10.0 m/s';
            el.slForce.value=0; el.vForce.textContent='0.0 N';
            el.chkFric.checked=false;
            upd();
        };

        el.btnRest.onclick = () => {
            el.resetBtn.onclick();
            sim.obj.v=0; sim.f.app=0; sim.fric.on=true;
            el.slVel.value=0; el.vVel.textContent='0.0 m/s';
            el.slForce.value=0; el.vForce.textContent='0.0 N';
            el.chkFric.checked=true;
            upd();
        };

        el.btnForce.onclick = () => {
            el.resetBtn.onclick();
            sim.obj.v=0; sim.f.app=20; sim.fric.on=false;
            el.slVel.value=0; el.vVel.textContent='0.0 m/s';
            el.slForce.value=20; el.vForce.textContent='20.0 N';
            el.chkFric.checked=false;
            upd();
        };

        el.btnFriction.onclick = () => {
            el.resetBtn.onclick();
            sim.obj.v=15; sim.f.app=0; sim.fric.on=true; sim.fric.k=0.3;
            el.slVel.value=15; el.vVel.textContent='15.0 m/s';
            el.slForce.value=0; el.vForce.textContent='0.0 N';
            el.chkFric.checked=true;
            el.slFric.value=0.3; el.vFric.textContent='0.30';
            upd();
        };

        document.addEventListener('keydown', e => {
            switch(e.key) {
                case ' ': e.preventDefault(); el.playBtn.onclick(); break;
                case 'r': el.resetBtn.onclick(); break;
                case 's': el.stepBtn.onclick(); break;
                case 'ArrowLeft':
                    sim.f.app = Math.max(-50, sim.f.app-1);
                    el.slForce.value = sim.f.app;
                    el.vForce.textContent = sim.f.app.toFixed(1)+' N';
                    upd();
                    break;
                case 'ArrowRight':
                    sim.f.app = Math.min(50, sim.f.app+1);
                    el.slForce.value = sim.f.app;
                    el.vForce.textContent = sim.f.app.toFixed(1)+' N';
                    upd();
                    break;
            }
        });

        upd();
        render();
        if(window.MathJax) MathJax.typesetPromise();
    </script>
</body>
</html>
