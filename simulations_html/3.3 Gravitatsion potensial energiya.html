<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gravitatsion Potensial Energiya</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            padding: 10px;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .subtitle {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .canvas-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        #simulationCanvas {
            width: 100%;
            height: 300px;
            border: 2px solid #3498db;
            border-radius: 10px;
            background: linear-gradient(to bottom, #87CEEB 0%, #98FB98 70%, #8FBC8F 100%);
            touch-action: none;
        }

        .controls {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .planet-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .planet-btn {
            padding: 10px 5px;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s;
            text-align: center;
        }

        .planet-btn.active {
            background: #3498db;
            color: white;
            transform: scale(1.05);
        }

        .control-item {
            margin-bottom: 15px;
        }

        .control-item label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="range"] {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #3498db;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .value-display {
            min-width: 60px;
            text-align: center;
            font-weight: bold;
            color: #3498db;
            font-size: 0.9em;
        }

        .button-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .btn {
            padding: 12px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .btn:active {
            transform: scale(0.95);
        }

        .values {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .values h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .value-item {
            background: rgba(52, 152, 219, 0.1);
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #3498db;
            text-align: center;
        }

        .value-item .label {
            font-size: 0.75em;
            color: #555;
            margin-bottom: 3px;
        }

        .value-item .value {
            font-size: 1.3em;
            font-weight: bold;
            color: #3498db;
        }

        .value-item .unit {
            font-size: 0.7em;
            color: #777;
        }

        .formula {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .formula h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .formula-box {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            border-left: 4px solid #3498db;
        }

        .formula-text {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
            margin: 10px 0;
        }

        .formula-desc {
            font-size: 0.85em;
            color: #555;
            line-height: 1.5;
            text-align: left;
        }

        .info-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .info-box h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .planet-info {
            font-size: 0.85em;
            line-height: 1.8;
            color: #555;
        }

        .planet-info li {
            margin-bottom: 5px;
        }

        @media (max-width: 360px) {
            .header h1 {
                font-size: 1.3em;
            }
            
            .planet-selector {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .values-grid {
                grid-template-columns: 1fr;
            }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üåç Gravitatsion Potensial Energiya</h1>
            <p class="subtitle">Ep = mgh</p>
        </div>

        <!-- Canvas -->
        <div class="canvas-container">
            <canvas id="simulationCanvas"></canvas>
        </div>

        <!-- Controls -->
        <div class="controls">
            <h3 style="margin-bottom: 10px; color: #2c3e50;">‚öôÔ∏è Boshqaruv</h3>
            
            <!-- Planet Selector -->
            <div class="planet-selector">
                <button class="planet-btn active" onclick="setPlanet('earth', this)">üåç Yer</button>
                <button class="planet-btn" onclick="setPlanet('moon', this)">üåô Oy</button>
                <button class="planet-btn" onclick="setPlanet('mars', this)">üî¥ Mars</button>
                <button class="planet-btn" onclick="setPlanet('jupiter', this)">ü™ê Yupiter</button>
                <button class="planet-btn" onclick="setPlanet('venus', this)">üí´ Venera</button>
                <button class="planet-btn" onclick="setPlanet('custom', this)">‚öôÔ∏è Boshqa</button>
            </div>

            <!-- Sliders -->
            <div class="control-item">
                <label>Massa (kg)</label>
                <div class="slider-container">
                    <input type="range" id="massSlider" min="0.1" max="100" value="10" step="0.1">
                    <div class="value-display" id="massValue">10.0</div>
                </div>
            </div>

            <div class="control-item">
                <label>Balandlik (m)</label>
                <div class="slider-container">
                    <input type="range" id="heightSlider" min="0" max="200" value="50" step="1">
                    <div class="value-display" id="heightValue">50</div>
                </div>
            </div>

            <div class="control-item">
                <label>Gravitatsiya (m/s¬≤)</label>
                <div class="slider-container">
                    <input type="range" id="gravitySlider" min="0.1" max="25" value="9.81" step="0.01">
                    <div class="value-display" id="gravityValue">9.81</div>
                </div>
            </div>

            <div class="control-item">
                <label>Nol sath (m)</label>
                <div class="slider-container">
                    <input type="range" id="referenceSlider" min="-50" max="50" value="0" step="1">
                    <div class="value-display" id="referenceValue">0</div>
                </div>
            </div>

            <!-- Buttons -->
            <div class="button-group">
                <button class="btn btn-primary" onclick="startAnim()">‚ñ∂Ô∏è Boshlash</button>
                <button class="btn btn-secondary" onclick="pauseAnim()">‚è∏Ô∏è Pauza</button>
                <button class="btn btn-secondary" onclick="resetAll()">üîÑ Qayta</button>
                <button class="btn btn-primary" onclick="stepAnim()">‚è≠Ô∏è Qadam</button>
            </div>
        </div>

        <!-- Values Display -->
        <div class="values">
            <h3>üî¢ Hozirgi qiymatlar</h3>
            <div class="values-grid">
                <div class="value-item">
                    <div class="label">Potensial energiya</div>
                    <div class="value" id="energyDisplay">0</div>
                    <div class="unit">J</div>
                </div>
                <div class="value-item">
                    <div class="label">Massa</div>
                    <div class="value" id="mDisplay">10</div>
                    <div class="unit">kg</div>
                </div>
                <div class="value-item">
                    <div class="label">Balandlik</div>
                    <div class="value" id="hDisplay">50</div>
                    <div class="unit">m</div>
                </div>
                <div class="value-item">
                    <div class="label">Gravitatsiya</div>
                    <div class="value" id="gDisplay">9.81</div>
                    <div class="unit">m/s¬≤</div>
                </div>
                <div class="value-item">
                    <div class="label">Solishtirma energiya</div>
                    <div class="value" id="specDisplay">0</div>
                    <div class="unit">J/kg</div>
                </div>
                <div class="value-item">
                    <div class="label">Nisbiy balandlik</div>
                    <div class="value" id="relDisplay">50</div>
                    <div class="unit">m</div>
                </div>
            </div>
        </div>

        <!-- Formula -->
        <div class="formula">
            <h3>üìê Formula</h3>
            <div class="formula-box">
                <div class="formula-text">Ep = m √ó g √ó h</div>
                <div class="formula-desc">
                    <strong>Ep</strong> - potensial energiya (J)<br>
                    <strong>m</strong> - massa (kg)<br>
                    <strong>g</strong> - gravitatsiya tezlanishi (m/s¬≤)<br>
                    <strong>h</strong> - balandlik (m)
                </div>
            </div>
        </div>

        <!-- Info -->
        <div class="info-box">
            <h3>üåå Sayyoralar gravitatsiyasi</h3>
            <ul class="planet-info">
                <li>üåç <strong>Yer:</strong> 9.81 m/s¬≤</li>
                <li>üåô <strong>Oy:</strong> 1.62 m/s¬≤</li>
                <li>üî¥ <strong>Mars:</strong> 3.71 m/s¬≤</li>
                <li>ü™ê <strong>Yupiter:</strong> 24.79 m/s¬≤</li>
                <li>üí´ <strong>Venera:</strong> 8.87 m/s¬≤</li>
                <li>‚òÄÔ∏è <strong>Quyosh:</strong> 274.0 m/s¬≤</li>
            </ul>
        </div>
    </div>

    <script>
        // Global variables
        let canvas, ctx;
        let isRunning = false;
        let animFrame;
        let time = 0;

        // Parameters
        let m = 10;  // mass (kg)
        let h = 50;  // height (m)
        let g = 9.81; // gravity (m/s¬≤)
        let ref = 0;  // reference level (m)

        // Planet data
        const planets = {
            earth: { g: 9.81, name: 'Yer', emoji: 'üåç' },
            moon: { g: 1.62, name: 'Oy', emoji: 'üåô' },
            mars: { g: 3.71, name: 'Mars', emoji: 'üî¥' },
            jupiter: { g: 24.79, name: 'Yupiter', emoji: 'ü™ê' },
            venus: { g: 8.87, name: 'Venera', emoji: 'üí´' },
            custom: { g: 9.81, name: 'Boshqa', emoji: '‚öôÔ∏è' }
        };

        let currentPlanet = 'earth';

        // Initialize
        window.onload = () => {
            canvas = document.getElementById('simulationCanvas');
            ctx = canvas.getContext('2d');
            setupCanvas();
            setupListeners();
            updateAll();
            animate();
        };

        function setupCanvas() {
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width * 2;
            canvas.height = rect.height * 2;
            ctx.scale(2, 2);
        }

        function setupListeners() {
            // Sliders
            document.getElementById('massSlider').oninput = (e) => {
                m = parseFloat(e.target.value);
                document.getElementById('massValue').textContent = m.toFixed(1);
                updateAll();
            };

            document.getElementById('heightSlider').oninput = (e) => {
                h = parseFloat(e.target.value);
                document.getElementById('heightValue').textContent = h;
                updateAll();
            };

            document.getElementById('gravitySlider').oninput = (e) => {
                g = parseFloat(e.target.value);
                document.getElementById('gravityValue').textContent = g.toFixed(2);
                updateAll();
            };

            document.getElementById('referenceSlider').oninput = (e) => {
                ref = parseFloat(e.target.value);
                document.getElementById('referenceValue').textContent = ref;
                updateAll();
            };

            // Touch events for canvas
            let startY = 0;
            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                startY = e.touches[0].clientY;
            }, { passive: false });

            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                const y = e.touches[0].clientY - rect.top;
                const newH = Math.max(0, Math.min(200, (rect.height - y) / rect.height * 200));
                h = Math.round(newH);
                document.getElementById('heightSlider').value = h;
                document.getElementById('heightValue').textContent = h;
                updateAll();
            }, { passive: false });

            // Resize
            window.addEventListener('resize', setupCanvas);
        }

        function setPlanet(key, btn) {
            currentPlanet = key;
            document.querySelectorAll('.planet-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            if (key !== 'custom') {
                g = planets[key].g;
                document.getElementById('gravitySlider').value = g;
                document.getElementById('gravityValue').textContent = g.toFixed(2);
            }
            
            updateAll();
            vibrate();
        }

        function calcEnergy() {
            return m * g * (h - ref);
        }

        function updateAll() {
            const ep = calcEnergy();
            const spec = ep / m;
            const relH = h - ref;

            document.getElementById('energyDisplay').textContent = ep.toFixed(2);
            document.getElementById('mDisplay').textContent = m.toFixed(1);
            document.getElementById('hDisplay').textContent = h;
            document.getElementById('gDisplay').textContent = g.toFixed(2);
            document.getElementById('specDisplay').textContent = spec.toFixed(2);
            document.getElementById('relDisplay').textContent = relH;
        }

        function draw() {
            const w = canvas.width / 2;
            const h_canvas = canvas.height / 2;
            
            // Clear
            ctx.clearRect(0, 0, w, h_canvas);
            
            // Background gradient
            const grad = ctx.createLinearGradient(0, 0, 0, h_canvas);
            grad.addColorStop(0, '#87CEEB');
            grad.addColorStop(0.7, '#98FB98');
            grad.addColorStop(1, '#8FBC8F');
            ctx.fillStyle = grad;
            ctx.fillRect(0, 0, w, h_canvas);
            
            // Ground
            const groundH = 40;
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, h_canvas - groundH, w, groundH);
            
            // Reference level
            const refY = h_canvas - groundH - (ref / 200 * (h_canvas - groundH - 50));
            if (ref !== 0) {
                ctx.strokeStyle = '#f39c12';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 3]);
                ctx.beginPath();
                ctx.moveTo(0, refY);
                ctx.lineTo(w, refY);
                ctx.stroke();
                ctx.setLineDash([]);
                
                ctx.fillStyle = '#f39c12';
                ctx.font = 'bold 10px Arial';
                ctx.fillText('Nol', 5, refY - 3);
            }
            
            // Object position
            const objX = w / 2;
            const objY = h_canvas - groundH - (h / 200 * (h_canvas - groundH - 50)) - 15;
            
            // Tower
            const towerW = 15;
            const towerH = h_canvas - groundH - objY;
            ctx.fillStyle = '#666';
            ctx.fillRect(objX - towerW/2, objY, towerW, towerH);
            
            // Height line
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(objX + 25, h_canvas - groundH);
            ctx.lineTo(objX + 25, objY);
            ctx.stroke();
            
            // Arrows
            ctx.beginPath();
            ctx.moveTo(objX + 22, h_canvas - groundH);
            ctx.lineTo(objX + 25, h_canvas - groundH);
            ctx.lineTo(objX + 28, h_canvas - groundH);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(objX + 22, objY);
            ctx.lineTo(objX + 25, objY);
            ctx.lineTo(objX + 28, objY);
            ctx.stroke();
            
            // Height label
            ctx.fillStyle = '#333';
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`h=${h}m`, objX + 32, (h_canvas - groundH + objY) / 2);
            
            // Object
            const size = Math.max(8, Math.min(20, m / 2));
            ctx.fillStyle = '#e74c3c';
            ctx.beginPath();
            ctx.arc(objX, objY, size, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#c0392b';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // Energy value
            const ep = calcEnergy();
            ctx.fillStyle = '#333';
            ctx.font = 'bold 11px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`Ep = ${ep.toFixed(1)} J`, objX, objY - size - 5);
            
            // Planet info
            const planet = planets[currentPlanet];
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`${planet.emoji} ${planet.name}`, 10, 25);
            ctx.font = '11px Arial';
            ctx.fillText(`g = ${g.toFixed(2)} m/s¬≤`, 10, 40);
            
            // Formula
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${m.toFixed(1)} √ó ${g.toFixed(2)} √ó ${h}`, w/2, h_canvas - 15);
            ctx.fillText(`= ${ep.toFixed(2)} J`, w/2, h_canvas - 3);
            
            // Energy bar
            const barW = 20;
            const barMaxH = 100;
            const barH = Math.min(barMaxH, Math.abs(ep) / 100);
            const barX = w - 35;
            const barY = h_canvas - groundH - barMaxH;
            
            // Bar background
            ctx.fillStyle = 'rgba(0,0,0,0.1)';
            ctx.fillRect(barX, barY, barW, barMaxH);
            
            // Bar fill
            if (ep >= 0) {
                ctx.fillStyle = '#27ae60';
                ctx.fillRect(barX, h_canvas - groundH - barH, barW, barH);
            } else {
                ctx.fillStyle = '#e74c3c';
                ctx.fillRect(barX, h_canvas - groundH, barW, -barH);
            }
            
            // Bar label
            ctx.fillStyle = '#333';
            ctx.font = 'bold 9px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Ep', barX + barW/2, h_canvas - groundH + 12);
            
            // Ripple effect
            if (isRunning) {
                const ripple = (time % 60) * 1.5;
                ctx.strokeStyle = `rgba(52,152,219,${1 - ripple/90})`;
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(objX, objY, ripple, 0, 2 * Math.PI);
                ctx.stroke();
            }
        }

        function animate() {
            if (isRunning) {
                time++;
            }
            draw();
            animFrame = requestAnimationFrame(animate);
        }

        function startAnim() {
            isRunning = true;
            vibrate();
        }

        function pauseAnim() {
            isRunning = false;
            vibrate();
        }

        function resetAll() {
            isRunning = false;
            time = 0;
            m = 10;
            h = 50;
            g = 9.81;
            ref = 0;
            
            document.getElementById('massSlider').value = m;
            document.getElementById('heightSlider').value = h;
            document.getElementById('gravitySlider').value = g;
            document.getElementById('referenceSlider').value = ref;
            
            document.getElementById('massValue').textContent = m.toFixed(1);
            document.getElementById('heightValue').textContent = h;
            document.getElementById('gravityValue').textContent = g.toFixed(2);
            document.getElementById('referenceValue').textContent = ref;
            
            updateAll();
            vibrate();
        }

        function stepAnim() {
            time++;
            updateAll();
            draw();
            vibrate(30);
        }

        function vibrate(duration = 50) {
            if (navigator.vibrate) {
                navigator.vibrate(duration);
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === ' ') {
                e.preventDefault();
                isRunning ? pauseAnim() : startAnim();
            } else if (e.key === 'r' || e.key === 'R') {
                resetAll();
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                h = Math.min(200, h + 5);
                document.getElementById('heightSlider').value = h;
                document.getElementById('heightValue').textContent = h;
                updateAll();
            } else if (e.key === 'ArrowDown') {
                e.preventDefault();
                h = Math.max(0, h - 5);
                document.getElementById('heightSlider').value = h;
                document.getElementById('heightValue').textContent = h;
                updateAll();
            }
        });
    </script>
</body>
</html>
