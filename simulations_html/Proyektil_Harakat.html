<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Proyektil Harakat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            font-size: 14px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 12px;
            font-size: 1.5em;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
            font-size: 13px;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 8px 0;
            height: 35px;
            accent-color: #3498db;
        }
        
        .value-display {
            color: #e74c3c;
            font-weight: bold;
            font-size: 16px;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
        }
        
        input[type="checkbox"] {
            width: 22px;
            height: 22px;
            accent-color: #3498db;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin: 12px 0;
        }
        
        button {
            padding: 14px 8px;
            font-size: 15px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            color: white;
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        .start-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
        }
        
        .stop-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        .reset-btn {
            background: linear-gradient(45deg, #f39c12, #e67e22);
        }
        
        .canvas-container {
            background: #fff;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 10px;
            overflow: hidden;
        }
        
        canvas {
            border: 2px solid #34495e;
            border-radius: 6px;
            display: block;
            width: 100%;
            height: auto;
            touch-action: none;
        }
        
        .stats {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #ddd;
            font-size: 13px;
        }
        
        .stat-row:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-value {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .formula-box {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .graphs {
            display: grid;
            gap: 10px;
        }
        
        .graph-container {
            background: #fff;
            padding: 10px;
            border-radius: 8px;
        }
        
        .graph-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Proyektil Harakat</h1>
        
        <div class="control-group">
            <label>Burchak: <span class="value-display" id="angleValue">45¬∞</span></label>
            <input type="range" id="angleSlider" min="1" max="89" value="45">
        </div>
        
        <div class="control-group">
            <label>Tezlik: <span class="value-display" id="velocityValue">50 m/s</span></label>
            <input type="range" id="velocitySlider" min="10" max="100" value="50">
        </div>
        
        <div class="control-group">
            <div class="checkbox-group">
                <input type="checkbox" id="airToggle">
                <label for="airToggle">Havo qarshiligi (k=0.01)</label>
            </div>
        </div>
        
        <div class="buttons">
            <button class="start-btn" onclick="start()">‚ñ∂Ô∏è Start</button>
            <button class="stop-btn" onclick="stop()">‚èπÔ∏è Stop</button>
            <button class="reset-btn" onclick="reset()">üîÑ Reset</button>
        </div>
        
        <div class="canvas-container">
            <canvas id="canvas" width="400" height="300"></canvas>
        </div>
        
        <div class="stats">
            <div class="stat-row">
                <span class="stat-label">Max balandlik:</span>
                <span class="stat-value" id="maxH">0 m</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Max masofa:</span>
                <span class="stat-value" id="maxR">0 m</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Uchish vaqti:</span>
                <span class="stat-value" id="flightT">0 s</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Joriy vaqt:</span>
                <span class="stat-value" id="currT">0 s</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Joriy tezlik:</span>
                <span class="stat-value" id="currV">0 m/s</span>
            </div>
        </div>
        
        <div class="formula-box">
            <strong>Formulalar:</strong><br>
            x = v‚ÇÄ¬∑cos(Œ∏)¬∑t<br>
            y = v‚ÇÄ¬∑sin(Œ∏)¬∑t - ¬Ω¬∑g¬∑t¬≤<br>
            v‚Çì = v‚ÇÄ¬∑cos(Œ∏)<br>
            v·µß = v‚ÇÄ¬∑sin(Œ∏) - g¬∑t
        </div>
        
        <div class="graphs">
            <div class="graph-container">
                <div class="graph-title">üìà Horizontal tezlik (V‚Çì)</div>
                <canvas id="vxGraph" width="350" height="180"></canvas>
            </div>
            
            <div class="graph-container">
                <div class="graph-title">üìä Vertikal tezlik (V·µß)</div>
                <canvas id="vyGraph" width="350" height="180"></canvas>
            </div>
        </div>
    </div>

    <script>
        const c = document.getElementById('canvas');
        const ctx = c.getContext('2d');
        const vxC = document.getElementById('vxGraph');
        const vxCtx = vxC.getContext('2d');
        const vyC = document.getElementById('vyGraph');
        const vyCtx = vyC.getContext('2d');
        
        const g = 9.81;
        let anim, running = false, t = 0, traj = [], vxD = [], vyD = [];
        let scale = 3, ox = 30, oy = 30;
        
        const aSlider = document.getElementById('angleSlider');
        const vSlider = document.getElementById('velocitySlider');
        const airToggle = document.getElementById('airToggle');
        
        aSlider.oninput = vSlider.oninput = () => {
            update();
            if (!running) drawGrid();
        };
        airToggle.onchange = update;
        
        function update() {
            document.getElementById('angleValue').textContent = aSlider.value + '¬∞';
            document.getElementById('velocityValue').textContent = vSlider.value + ' m/s';
            calc();
        }
        
        function calc() {
            const a = aSlider.value * Math.PI / 180;
            const v0 = +vSlider.value;
            const h = (v0 * Math.sin(a))**2 / (2 * g);
            const r = v0**2 * Math.sin(2 * a) / g;
            const ft = 2 * v0 * Math.sin(a) / g;
            
            const sx = (c.width - ox * 2) / (r * 1.1);
            const sy = (c.height - oy * 2) / (h * 1.2);
            scale = Math.min(sx, sy, 8);
            
            document.getElementById('maxH').textContent = h.toFixed(1) + ' m';
            document.getElementById('maxR').textContent = r.toFixed(1) + ' m';
            document.getElementById('flightT').textContent = ft.toFixed(2) + ' s';
        }
        
        function drawGrid() {
            ctx.clearRect(0, 0, c.width, c.height);
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            const gs = Math.max(15, Math.min(50, 150 / scale));
            for (let x = ox; x < c.width - ox; x += gs) {
                ctx.beginPath();
                ctx.moveTo(x, oy);
                ctx.lineTo(x, c.height - oy);
                ctx.stroke();
            }
            for (let y = oy; y < c.height - oy; y += gs) {
                ctx.beginPath();
                ctx.moveTo(ox, y);
                ctx.lineTo(c.width - ox, y);
                ctx.stroke();
            }
            
            ctx.strokeStyle = '#34495e';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(ox, c.height - oy);
            ctx.lineTo(c.width - ox, c.height - oy);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(ox, oy);
            ctx.lineTo(ox, c.height - oy);
            ctx.stroke();
            
            ctx.fillStyle = '#34495e';
            ctx.font = '10px Arial';
            ctx.fillText('X', c.width - ox - 15, c.height - oy + 15);
            ctx.fillText('Y', ox - 15, oy + 10);
        }
        
        function drawTraj() {
            if (traj.length < 2) return;
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.beginPath();
            traj.forEach((p, i) => {
                i === 0 ? ctx.moveTo(p.x, p.y) : ctx.lineTo(p.x, p.y);
            });
            ctx.stroke();
        }
        
        function drawBall(x, y) {
            const grad = ctx.createRadialGradient(x, y, 0, x, y, 10);
            grad.addColorStop(0, '#ff6b6b');
            grad.addColorStop(1, '#d63031');
            ctx.fillStyle = grad;
            ctx.beginPath();
            ctx.arc(x, y, 10, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function drawVec(x, y, vx, vy) {
            const l = 2.5;
            const ex = x + vx * l;
            const ey = y - vy * l;
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(ex, ey);
            ctx.stroke();
            
            const ang = Math.atan2(-(vy * l), vx * l);
            const ah = 7;
            ctx.beginPath();
            ctx.moveTo(ex, ey);
            ctx.lineTo(ex - ah * Math.cos(ang - Math.PI / 6), ey + ah * Math.sin(ang - Math.PI / 6));
            ctx.moveTo(ex, ey);
            ctx.lineTo(ex - ah * Math.cos(ang + Math.PI / 6), ey + ah * Math.sin(ang + Math.PI / 6));
            ctx.stroke();
        }
        
        function drawGAxes(ctx, cnv, yMin, yMax, xMax) {
            const m = 35;
            const pw = cnv.width - 2 * m;
            const ph = cnv.height - 2 * m;
            
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, cnv.width, cnv.height);
            
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const x = m + i * pw / 5;
                ctx.beginPath();
                ctx.moveTo(x, m);
                ctx.lineTo(x, cnv.height - m);
                ctx.stroke();
                
                const y = m + i * ph / 5;
                ctx.beginPath();
                ctx.moveTo(m, y);
                ctx.lineTo(cnv.width - m, y);
                ctx.stroke();
            }
            
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(m, cnv.height - m);
            ctx.lineTo(cnv.width - m, cnv.height - m);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(m, m);
            ctx.lineTo(m, cnv.height - m);
            ctx.stroke();
            
            ctx.fillStyle = '#2c3e50';
            ctx.font = '10px Arial';
            ctx.textAlign = 'right';
            for (let i = 0; i <= 5; i++) {
                const y = cnv.height - m - i * ph / 5;
                const v = yMin + i * (yMax - yMin) / 5;
                ctx.fillText(v.toFixed(1), m - 3, y + 3);
            }
        }
        
        function drawGraphs() {
            const a = aSlider.value * Math.PI / 180;
            const v0 = +vSlider.value;
            const ft = 2 * v0 * Math.sin(a) / g;
            
            vxCtx.clearRect(0, 0, vxC.width, vxC.height);
            const vx0 = v0 * Math.cos(a);
            drawGAxes(vxCtx, vxC, 0, vx0 * 1.2, ft);
            
            if (vxD.length > 1) {
                const m = 35;
                const pw = vxC.width - 2 * m;
                const ph = vxC.height - 2 * m;
                
                vxCtx.strokeStyle = '#27ae60';
                vxCtx.lineWidth = 2;
                vxCtx.beginPath();
                vxD.forEach((v, i) => {
                    const ct = i * 0.05;
                    const x = m + (ct / ft) * pw;
                    const y = vxC.height - m - (v / (vx0 * 1.2)) * ph;
                    i === 0 ? vxCtx.moveTo(x, y) : vxCtx.lineTo(x, y);
                });
                vxCtx.stroke();
                
                const ct = (vxD.length - 1) * 0.05;
                const cx = m + (ct / ft) * pw;
                const cy = vxC.height - m - (vxD[vxD.length - 1] / (vx0 * 1.2)) * ph;
                vxCtx.fillStyle = '#e74c3c';
                vxCtx.beginPath();
                vxCtx.arc(cx, cy, 5, 0, 2 * Math.PI);
                vxCtx.fill();
            }
            
            vyCtx.clearRect(0, 0, vyC.width, vyC.height);
            const vy0 = v0 * Math.sin(a);
            drawGAxes(vyCtx, vyC, -vy0, vy0, ft);
            
            if (vyD.length > 1) {
                const m = 35;
                const pw = vyC.width - 2 * m;
                const ph = vyC.height - 2 * m;
                
                vyCtx.strokeStyle = '#e74c3c';
                vyCtx.lineWidth = 2;
                vyCtx.beginPath();
                vyD.forEach((v, i) => {
                    const ct = i * 0.05;
                    const x = m + (ct / ft) * pw;
                    const y = vyC.height - m - ((v + vy0) / (2 * vy0)) * ph;
                    i === 0 ? vyCtx.moveTo(x, y) : vyCtx.lineTo(x, y);
                });
                vyCtx.stroke();
                
                const zy = vyC.height - m - (vy0 / (2 * vy0)) * ph;
                vyCtx.strokeStyle = '#95a5a6';
                vyCtx.setLineDash([4, 4]);
                vyCtx.beginPath();
                vyCtx.moveTo(m, zy);
                vyCtx.lineTo(vyC.width - m, zy);
                vyCtx.stroke();
                vyCtx.setLineDash([]);
                
                const ct = (vyD.length - 1) * 0.05;
                const cx = m + (ct / ft) * pw;
                const cy = vyC.height - m - ((vyD[vyD.length - 1] + vy0) / (2 * vy0)) * ph;
                vyCtx.fillStyle = '#27ae60';
                vyCtx.beginPath();
                vyCtx.arc(cx, cy, 5, 0, 2 * Math.PI);
                vyCtx.fill();
            }
        }
        
        function animate() {
            const a = aSlider.value * Math.PI / 180;
            const v0 = +vSlider.value;
            const k = airToggle.checked ? 0.01 : 0;
            
            let vx, vy, x, y;
            
            if (k === 0) {
                vx = v0 * Math.cos(a);
                vy = v0 * Math.sin(a) - g * t;
                x = v0 * Math.cos(a) * t;
                y = v0 * Math.sin(a) * t - 0.5 * g * t * t;
            } else {
                const dt = 0.05;
                if (traj.length === 0) {
                    vx = v0 * Math.cos(a);
                    vy = v0 * Math.sin(a);
                    x = 0;
                    y = 0;
                } else {
                    const lp = traj[traj.length - 1];
                    const lvx = vxD[vxD.length - 1];
                    const lvy = vyD[vyD.length - 1];
                    const spd = Math.sqrt(lvx * lvx + lvy * lvy);
                    vx = lvx - k * spd * lvx * dt;
                    vy = lvy - g * dt - k * spd * lvy * dt;
                    x = lp.rx + vx * dt;
                    y = lp.ry + vy * dt;
                }
            }
            
            const sx = ox + x * scale;
            const sy = c.height - oy - y * scale;
            
            traj.push({x: sx, y: sy, rx: x, ry: y});
            vxD.push(vx);
            vyD.push(vy);
            
            ctx.clearRect(0, 0, c.width, c.height);
            drawGrid();
            drawTraj();
            
            if (y >= 0 && sx < c.width - ox) {
                drawBall(sx, sy);
                drawVec(sx, sy, vx, vy);
                
                document.getElementById('currT').textContent = t.toFixed(2) + ' s';
                const cs = Math.sqrt(vx * vx + vy * vy);
                document.getElementById('currV').textContent = cs.toFixed(1) + ' m/s';
                
                drawGraphs();
                
                t += 0.05;
                if (running) anim = requestAnimationFrame(animate);
            } else {
                running = false;
                document.getElementById('currT').textContent = t.toFixed(2) + ' s (OK)';
            }
        }
        
        function start() {
            if (!running) {
                running = true;
                animate();
            }
        }
        
        function stop() {
            running = false;
            if (anim) cancelAnimationFrame(anim);
        }
        
        function reset() {
            stop();
            t = 0;
            traj = [];
            vxD = [];
            vyD = [];
            calc();
            ctx.clearRect(0, 0, c.width, c.height);
            drawGrid();
            drawGraphs();
            document.getElementById('currT').textContent = '0 s';
            document.getElementById('currV').textContent = '0 m/s';
        }
        
        update();
        drawGrid();
        drawGraphs();
    </script>
</body>
</html>
