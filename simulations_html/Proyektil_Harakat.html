<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyektil Harakat Simulyatori</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        input[type="range"] {
            width: 100%;
            margin: 5px 0;
            accent-color: #3498db;
        }
        
        input[type="number"] {
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        
        button {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 5px;
        }
        
        .start-btn {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
        }
        
        .stop-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .reset-btn {
            background: linear-gradient(45deg, #f39c12, #e67e22);
            color: white;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .simulation-area {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .canvas-container {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        canvas {
            border: 2px solid #34495e;
            border-radius: 8px;
            display: block;
            max-width: 100%;
        }
        
        .info-panel {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .formula-box {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .stats {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .stat-label {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-value {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .graphs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .graph-container {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .graph-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .air-resistance-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #3498db;
        }
        
        @media (max-width: 768px) {
            .simulation-area {
                grid-template-columns: 1fr;
            }
            
            .graphs {
                grid-template-columns: 1fr;
            }
            
            .controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Proyektil Harakat Simulyatori</h1>
        
        <div class="controls">
            <div class="control-group">
                <label>Burchak (Œ∏): <span id="angleValue">45¬∞</span></label>
                <input type="range" id="angleSlider" min="1" max="89" value="45">
            </div>
            
            <div class="control-group">
                <label>Boshlang'ich tezlik (v‚ÇÄ): <span id="velocityValue">50 m/s</span></label>
                <input type="range" id="velocitySlider" min="10" max="100" value="50">
            </div>
            
            <div class="control-group">
                <label>Havo qarshiligi koeffitsienti:</label>
                <input type="number" id="airResistance" min="0" max="0.1" step="0.001" value="0">
                <div class="air-resistance-toggle">
                    <input type="checkbox" id="airResistanceToggle">
                    <label for="airResistanceToggle">Havo qarshiligi</label>
                </div>
            </div>
            
            <div class="control-group">
                <button class="start-btn" onclick="startSimulation()">‚ñ∂Ô∏è Boshlash</button>
                <button class="stop-btn" onclick="stopSimulation()">‚èπÔ∏è To'xtatish</button>
                <button class="reset-btn" onclick="resetSimulation()">üîÑ Qayta boshlash</button>
            </div>
        </div>
        
        <div class="simulation-area">
            <div class="canvas-container">
                <canvas id="trajectoryCanvas" width="800" height="400"></canvas>
            </div>
            
            <div class="info-panel">
                <div class="formula-box">
                    <strong>üìê Proyektil harakat formulalari:</strong><br>
                    x = v‚ÇÄ ¬∑ cos(Œ∏) ¬∑ t<br>
                    y = v‚ÇÄ ¬∑ sin(Œ∏) ¬∑ t - ¬Ω ¬∑ g ¬∑ t¬≤<br><br>
                    <strong>Komponentlar:</strong><br>
                    v‚Çì = v‚ÇÄ ¬∑ cos(Œ∏)<br>
                    v·µß = v‚ÇÄ ¬∑ sin(Œ∏) - g ¬∑ t
                </div>
                
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-label">Maksimal balandlik:</span>
                        <span class="stat-value" id="maxHeight">0 m</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Maksimal masofa:</span>
                        <span class="stat-value" id="maxRange">0 m</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Uchish vaqti:</span>
                        <span class="stat-value" id="flightTime">0 s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Joriy vaqt:</span>
                        <span class="stat-value" id="currentTime">0 s</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Joriy tezlik:</span>
                        <span class="stat-value" id="currentVelocity">0 m/s</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="graphs">
            <div class="graph-container">
                <div class="graph-title">üìà Horizontal tezlik (V‚Çì)</div>
                <canvas id="vxGraph" width="350" height="200"></canvas>
            </div>
            
            <div class="graph-container">
                <div class="graph-title">üìä Vertikal tezlik (V·µß)</div>
                <canvas id="vyGraph" width="350" height="200"></canvas>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('trajectoryCanvas');
        const ctx = canvas.getContext('2d');
        const vxCanvas = document.getElementById('vxGraph');
        const vxCtx = vxCanvas.getContext('2d');
        const vyCanvas = document.getElementById('vyGraph');
        const vyCtx = vyCanvas.getContext('2d');
        
        let animationId;
        let isRunning = false;
        let t = 0;
        let trajectory = [];
        let vxData = [];
        let vyData = [];
        
        const g = 9.81; // gravitatsiya tezlanishi
        let scale = 4; // dinamik masshtab
        let offsetX = 50; // chap chetdan masofa
        let offsetY = 50; // pastki chetdan masofa
        
        // Boshqaruv elementlari
        const angleSlider = document.getElementById('angleSlider');
        const velocitySlider = document.getElementById('velocitySlider');
        const airResistanceInput = document.getElementById('airResistance');
        const airResistanceToggle = document.getElementById('airResistanceToggle');
        
        // Qiymatlarni yangilash
        angleSlider.addEventListener('input', () => {
            updateDisplay();
            if (!isRunning) drawGrid(); // Faqat simulyatsiya to'xtaganda grid yangilansin
        });
        velocitySlider.addEventListener('input', () => {
            updateDisplay();
            if (!isRunning) drawGrid();
        });
        airResistanceInput.addEventListener('input', updateDisplay);
        airResistanceToggle.addEventListener('change', updateDisplay);
        
        function updateDisplay() {
            document.getElementById('angleValue').textContent = angleSlider.value + '¬∞';
            document.getElementById('velocityValue').textContent = velocitySlider.value + ' m/s';
            calculateParameters();
        }
        
        function calculateParameters() {
            const angle = parseFloat(angleSlider.value) * Math.PI / 180;
            const v0 = parseFloat(velocitySlider.value);
            
            // Maksimal balandlik: H = (v‚ÇÄsinŒ∏)¬≤ / (2g)
            const maxHeight = (v0 * Math.sin(angle))**2 / (2 * g);
            
            // Maksimal masofa: R = v‚ÇÄ¬≤sin(2Œ∏) / g
            const maxRange = (v0**2 * Math.sin(2 * angle)) / g;
            
            // Uchish vaqti: T = 2v‚ÇÄsinŒ∏ / g
            const flightTime = (2 * v0 * Math.sin(angle)) / g;
            
            // Masshtabni avtomatik hisoblash
            const canvasWidth = canvas.width - offsetX * 2;
            const canvasHeight = canvas.height - offsetY * 2;
            
            // Horizontal va vertikal masshtablarni alohida hisoblash
            const scaleX = canvasWidth / (maxRange * 1.1); // 10% qo'shimcha joy
            const scaleY = canvasHeight / (maxHeight * 1.2); // 20% qo'shimcha joy
            
            // Kichikroq masshtabni tanlash (butun traektoriya ko'rinishi uchun)
            scale = Math.min(scaleX, scaleY, 10); // maksimal 10x masshtab
            
            document.getElementById('maxHeight').textContent = maxHeight.toFixed(1) + ' m';
            document.getElementById('maxRange').textContent = maxRange.toFixed(1) + ' m';
            document.getElementById('flightTime').textContent = flightTime.toFixed(2) + ' s';
        }
        
        function drawGrid() {
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            // Grid o'lchamini masshtabga moslashtirish
            const gridSize = Math.max(20, Math.min(80, 200 / scale));
            
            // Vertikal chiziqlar
            for (let x = offsetX; x < canvas.width - offsetX; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, offsetY);
                ctx.lineTo(x, canvas.height - offsetY);
                ctx.stroke();
            }
            
            // Horizontal chiziqlar
            for (let y = offsetY; y < canvas.height - offsetY; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(offsetX, y);
                ctx.lineTo(canvas.width - offsetX, y);
                ctx.stroke();
            }
            
            // Koordinata o'qlari
            ctx.strokeStyle = '#34495e';
            ctx.lineWidth = 2;
            
            // X o'qi
            ctx.beginPath();
            ctx.moveTo(offsetX, canvas.height - offsetY);
            ctx.lineTo(canvas.width - offsetX, canvas.height - offsetY);
            ctx.stroke();
            
            // Y o'qi
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX, canvas.height - offsetY);
            ctx.stroke();
            
            // O'q ko'rsatkichlari
            const arrowSize = 8;
            // X o'qi o'q ko'rsatkichi
            ctx.beginPath();
            ctx.moveTo(canvas.width - offsetX, canvas.height - offsetY);
            ctx.lineTo(canvas.width - offsetX - arrowSize, canvas.height - offsetY - arrowSize/2);
            ctx.lineTo(canvas.width - offsetX - arrowSize, canvas.height - offsetY + arrowSize/2);
            ctx.closePath();
            ctx.fillStyle = '#34495e';
            ctx.fill();
            
            // Y o'qi o'q ko'rsatkichi
            ctx.beginPath();
            ctx.moveTo(offsetX, offsetY);
            ctx.lineTo(offsetX - arrowSize/2, offsetY + arrowSize);
            ctx.lineTo(offsetX + arrowSize/2, offsetY + arrowSize);
            ctx.closePath();
            ctx.fill();
            
            // O'q yorliqlari
            ctx.fillStyle = '#2c3e50';
            ctx.font = '14px Arial';
            ctx.fillText('X (m)', canvas.width - offsetX - 30, canvas.height - offsetY + 25);
            ctx.fillText('Y (m)', offsetX - 30, offsetY + 15);
        }
        
        function drawTrajectory() {
            if (trajectory.length < 2) return;
            
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i < trajectory.length; i++) {
                const point = trajectory[i];
                if (i === 0) {
                    ctx.moveTo(point.x, point.y);
                } else {
                    ctx.lineTo(point.x, point.y);
                }
            }
            ctx.stroke();
        }
        
        function drawBall(x, y) {
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, 15);
            gradient.addColorStop(0, '#ff6b6b');
            gradient.addColorStop(0.7, '#ee5a52');
            gradient.addColorStop(1, '#d63031');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, 15, 0, 2 * Math.PI);
            ctx.fill();
            
            // To'pga yaltiroq qo'shish
            ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.beginPath();
            ctx.arc(x - 5, y - 5, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        function drawVelocityVector(x, y, vx, vy) {
            const arrowLength = 3;
            const endX = x + vx * arrowLength;
            const endY = y - vy * arrowLength;  // Y koordinatasi teskari
            
            // Vektor
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(endX, endY);
            ctx.stroke();
            
            // O'q uchi
            const angle = Math.atan2(-(vy * arrowLength), vx * arrowLength);
            const arrowHead = 10;
            
            ctx.beginPath();
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowHead * Math.cos(angle - Math.PI / 6), 
                      endY + arrowHead * Math.sin(angle - Math.PI / 6));
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - arrowHead * Math.cos(angle + Math.PI / 6), 
                      endY + arrowHead * Math.sin(angle + Math.PI / 6));
            ctx.stroke();
        }
        
        function drawGraphAxes(ctx, canvas, title, yMin, yMax, xMax) {
            const margin = 40;
            const plotWidth = canvas.width - 2 * margin;
            const plotHeight = canvas.height - 2 * margin;
            
            // Fon
            ctx.fillStyle = '#f8f9fa';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            
            // Vertikal grid chiziqlar
            for (let i = 0; i <= 5; i++) {
                const x = margin + (i * plotWidth) / 5;
                ctx.beginPath();
                ctx.moveTo(x, margin);
                ctx.lineTo(x, canvas.height - margin);
                ctx.stroke();
            }
            
            // Horizontal grid chiziqlar
            for (let i = 0; i <= 5; i++) {
                const y = margin + (i * plotHeight) / 5;
                ctx.beginPath();
                ctx.moveTo(margin, y);
                ctx.lineTo(canvas.width - margin, y);
                ctx.stroke();
            }
            
            // Asosiy o'qlar
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 2;
            
            // X o'qi
            ctx.beginPath();
            ctx.moveTo(margin, canvas.height - margin);
            ctx.lineTo(canvas.width - margin, canvas.height - margin);
            ctx.stroke();
            
            // Y o'qi
            ctx.beginPath();
            ctx.moveTo(margin, margin);
            ctx.lineTo(margin, canvas.height - margin);
            ctx.stroke();
            
            // Y o'qi raqamlari
            ctx.fillStyle = '#2c3e50';
            ctx.font = '12px Arial';
            ctx.textAlign = 'right';
            
            for (let i = 0; i <= 5; i++) {
                const y = canvas.height - margin - (i * plotHeight) / 5;
                const value = yMin + (i * (yMax - yMin)) / 5;
                ctx.fillText(value.toFixed(1), margin - 5, y + 4);
            }
            
            // X o'qi raqamlari
            ctx.textAlign = 'center';
            for (let i = 0; i <= 5; i++) {
                const x = margin + (i * plotWidth) / 5;
                const value = (i * xMax) / 5;
                ctx.fillText(value.toFixed(1), x, canvas.height - margin + 20);
            }
            
            // Yorliqlar
            ctx.textAlign = 'center';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('Vaqt (s)', canvas.width / 2, canvas.height - 5);
            
            ctx.save();
            ctx.translate(15, canvas.height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Tezlik (m/s)', 0, 0);
            ctx.restore();
        }
        
        function drawGraphs() {
            const angle = parseFloat(angleSlider.value) * Math.PI / 180;
            const v0 = parseFloat(velocitySlider.value);
            const flightTime = (2 * v0 * Math.sin(angle)) / g;
            
            // Vx grafigi
            vxCtx.clearRect(0, 0, vxCanvas.width, vxCanvas.height);
            
            const vx0 = v0 * Math.cos(angle);
            drawGraphAxes(vxCtx, vxCanvas, 'Vx', 0, vx0 * 1.2, flightTime);
            
            if (vxData.length > 1) {
                const margin = 40;
                const plotWidth = vxCanvas.width - 2 * margin;
                const plotHeight = vxCanvas.height - 2 * margin;
                
                vxCtx.strokeStyle = '#27ae60';
                vxCtx.lineWidth = 3;
                vxCtx.beginPath();
                
                for (let i = 0; i < vxData.length; i++) {
                    const currentTime = i * 0.05;
                    const x = margin + (currentTime / flightTime) * plotWidth;
                    const y = vxCanvas.height - margin - (vxData[i] / (vx0 * 1.2)) * plotHeight;
                    
                    if (i === 0) {
                        vxCtx.moveTo(x, y);
                    } else {
                        vxCtx.lineTo(x, y);
                    }
                }
                vxCtx.stroke();
                
                // Joriy nuqta
                const currentTime = (vxData.length - 1) * 0.05;
                const currentX = margin + (currentTime / flightTime) * plotWidth;
                const currentY = vxCanvas.height - margin - (vxData[vxData.length - 1] / (vx0 * 1.2)) * plotHeight;
                
                vxCtx.fillStyle = '#e74c3c';
                vxCtx.beginPath();
                vxCtx.arc(currentX, currentY, 6, 0, 2 * Math.PI);
                vxCtx.fill();
            }
            
            // Vy grafigi
            vyCtx.clearRect(0, 0, vyCanvas.width, vyCanvas.height);
            
            const vy0 = v0 * Math.sin(angle);
            const vyMin = -vy0;
            const vyMax = vy0;
            drawGraphAxes(vyCtx, vyCanvas, 'Vy', vyMin, vyMax, flightTime);
            
            if (vyData.length > 1) {
                const margin = 40;
                const plotWidth = vyCanvas.width - 2 * margin;
                const plotHeight = vyCanvas.height - 2 * margin;
                
                vyCtx.strokeStyle = '#e74c3c';
                vyCtx.lineWidth = 3;
                vyCtx.beginPath();
                
                for (let i = 0; i < vyData.length; i++) {
                    const currentTime = i * 0.05;
                    const x = margin + (currentTime / flightTime) * plotWidth;
                    const y = vyCanvas.height - margin - ((vyData[i] - vyMin) / (vyMax - vyMin)) * plotHeight;
                    
                    if (i === 0) {
                        vyCtx.moveTo(x, y);
                    } else {
                        vyCtx.lineTo(x, y);
                    }
                }
                vyCtx.stroke();
                
                // Nol chizig'i
                const zeroY = vyCanvas.height - margin - ((0 - vyMin) / (vyMax - vyMin)) * plotHeight;
                vyCtx.strokeStyle = '#95a5a6';
                vyCtx.lineWidth = 2;
                vyCtx.setLineDash([5, 5]);
                vyCtx.beginPath();
                vyCtx.moveTo(margin, zeroY);
                vyCtx.lineTo(vyCanvas.width - margin, zeroY);
                vyCtx.stroke();
                vyCtx.setLineDash([]);
                
                // Joriy nuqta
                const currentTime = (vyData.length - 1) * 0.05;
                const currentX = margin + (currentTime / flightTime) * plotWidth;
                const currentY = vyCanvas.height - margin - ((vyData[vyData.length - 1] - vyMin) / (vyMax - vyMin)) * plotHeight;
                
                vyCtx.fillStyle = '#27ae60';
                vyCtx.beginPath();
                vyCtx.arc(currentX, currentY, 6, 0, 2 * Math.PI);
                vyCtx.fill();
            }
        }
        
        function animate() {
            const angle = parseFloat(angleSlider.value) * Math.PI / 180;
            const v0 = parseFloat(velocitySlider.value);
            const k = airResistanceToggle.checked ? parseFloat(airResistanceInput.value) : 0;
            
            let vx, vy, x, y;
            
            if (k === 0) {
                // Havo qarshiliksiz
                vx = v0 * Math.cos(angle);
                vy = v0 * Math.sin(angle) - g * t;
                x = v0 * Math.cos(angle) * t;
                y = v0 * Math.sin(angle) * t - 0.5 * g * t * t;
            } else {
                // Havo qarshiligi bilan (soddalashtirilgan)
                const dt = 0.05;
                if (trajectory.length === 0) {
                    vx = v0 * Math.cos(angle);
                    vy = v0 * Math.sin(angle);
                    x = 0;
                    y = 0;
                } else {
                    const lastPoint = trajectory[trajectory.length - 1];
                    const lastVx = vxData[vxData.length - 1] || vx;
                    const lastVy = vyData[vyData.length - 1] || vy;
                    
                    const speed = Math.sqrt(lastVx * lastVx + lastVy * lastVy);
                    vx = lastVx - k * speed * lastVx * dt;
                    vy = lastVy - g * dt - k * speed * lastVy * dt;
                    
                    x = lastPoint.realX + vx * dt;
                    y = lastPoint.realY + vy * dt;
                }
            }
            
            // Koordinatalarni ekranga moslashtirish (koordinata tizimi bilan)
            const screenX = offsetX + x * scale;
            const screenY = canvas.height - offsetY - y * scale;
            
            // Ma'lumotlarni saqlash
            trajectory.push({x: screenX, y: screenY, realX: x, realY: y});
            vxData.push(vx);
            vyData.push(vy);
            
            // Ekranni tozalash va chizish
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            drawTrajectory();
            
            if (y >= 0 && screenX < canvas.width - offsetX) {
                drawBall(screenX, screenY);
                drawVelocityVector(screenX, screenY, vx, vy);
                
                // Ma'lumotlarni yangilash
                document.getElementById('currentTime').textContent = t.toFixed(2) + ' s';
                const currentSpeed = Math.sqrt(vx * vx + vy * vy);
                document.getElementById('currentVelocity').textContent = currentSpeed.toFixed(1) + ' m/s';
                
                drawGraphs();
                
                t += 0.05;
                if (isRunning) {
                    animationId = requestAnimationFrame(animate);
                }
            } else {
                isRunning = false;
                document.getElementById('currentTime').textContent = t.toFixed(2) + ' s (Tugatildi)';
            }
        }
        
        function startSimulation() {
            if (!isRunning) {
                isRunning = true;
                animate();
            }
        }
        
        function stopSimulation() {
            isRunning = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
        }
        
        function resetSimulation() {
            stopSimulation();
            t = 0;
            trajectory = [];
            vxData = [];
            vyData = [];
            
            // Yangi parametrlar uchun masshtabni qayta hisoblash
            calculateParameters();
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            
            // Grafiklarni qayta chizish
            drawGraphs();
            
            document.getElementById('currentTime').textContent = '0 s';
            document.getElementById('currentVelocity').textContent = '0 m/s';
        }
        
        // Boshlang'ich sozlamalar
        updateDisplay();
        drawGrid();
        drawGraphs(); // Boshlang'ich grafiklarni chizish
    </script>
</body>
</html>
